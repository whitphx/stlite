{"version":3,"file":"index-Dyp4B6Ro.js","sources":["../../../node_modules/@emotion-icons/material-outlined/Mic/Mic.esm.js","../../../node_modules/@emotion-icons/material-rounded/Pause/Pause.esm.js","../../../node_modules/@emotion-icons/material-rounded/PlayArrow/PlayArrow.esm.js","../../../node_modules/@emotion-icons/material-rounded/Refresh/Refresh.esm.js","../../../node_modules/@emotion-icons/material-rounded/StopCircle/StopCircle.esm.js","../../../node_modules/wavesurfer.js/dist/wavesurfer.esm.js","../../../node_modules/wavesurfer.js/dist/plugins/record.js","../../../streamlit/frontend/lib/src/hooks/useDownloadUrl.ts","../../../streamlit/frontend/lib/src/hooks/useWidgetManagerElementState.tsx","../../../streamlit/frontend/lib/src/util/uploadFiles.ts","../../../streamlit/frontend/lib/src/components/widgets/AudioInput/styled-components.ts","../../../streamlit/frontend/lib/src/components/widgets/AudioInput/AudioInputActionButtons.tsx","../../../streamlit/frontend/lib/src/components/widgets/AudioInput/AudioInputErrorState.tsx","../../../streamlit/frontend/lib/src/components/widgets/AudioInput/constants.ts","../../../streamlit/frontend/lib/src/components/widgets/AudioInput/convertAudioToWav.ts","../../../streamlit/frontend/lib/src/components/widgets/AudioInput/formatTime.ts","../../../streamlit/frontend/lib/src/components/widgets/AudioInput/NoMicPermissions.tsx","../../../streamlit/frontend/lib/src/components/widgets/AudioInput/Placeholder.tsx","../../../streamlit/frontend/lib/src/components/widgets/AudioInput/AudioInput.tsx"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/extends\";\nimport * as React from 'react';\nimport { EmotionIconBase } from '@emotion-icons/emotion-icon';\nexport var Mic = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var attrs = {\n    \"fill\": \"currentColor\",\n    \"xmlns\": \"http://www.w3.org/2000/svg\"\n  };\n  return /*#__PURE__*/React.createElement(EmotionIconBase, _extends({\n    iconAttrs: attrs,\n    iconVerticalAlign: \"middle\",\n    iconViewBox: \"0 0 24 24\"\n  }, props, {\n    ref: ref\n  }), /*#__PURE__*/React.createElement(\"g\", {\n    fill: \"none\"\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    width: 24,\n    height: 24\n  }), /*#__PURE__*/React.createElement(\"rect\", {\n    width: 24,\n    height: 24\n  }), /*#__PURE__*/React.createElement(\"rect\", {\n    width: 24,\n    height: 24\n  })), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z\"\n  }));\n});\nMic.displayName = 'Mic';\nexport var MicDimensions = {\n  height: 24,\n  width: 24\n};","import _extends from \"@babel/runtime/helpers/extends\";\nimport * as React from 'react';\nimport { EmotionIconBase } from '@emotion-icons/emotion-icon';\nexport var Pause = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var attrs = {\n    \"fill\": \"currentColor\",\n    \"xmlns\": \"http://www.w3.org/2000/svg\"\n  };\n  return /*#__PURE__*/React.createElement(EmotionIconBase, _extends({\n    iconAttrs: attrs,\n    iconVerticalAlign: \"middle\",\n    iconViewBox: \"0 0 24 24\"\n  }, props, {\n    ref: ref\n  }), /*#__PURE__*/React.createElement(\"rect\", {\n    width: 24,\n    height: 24,\n    fill: \"none\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M8 19c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2s-2 .9-2 2v10c0 1.1.9 2 2 2zm6-12v10c0 1.1.9 2 2 2s2-.9 2-2V7c0-1.1-.9-2-2-2s-2 .9-2 2z\"\n  }));\n});\nPause.displayName = 'Pause';\nexport var PauseDimensions = {\n  height: 24,\n  width: 24\n};","import _extends from \"@babel/runtime/helpers/extends\";\nimport * as React from 'react';\nimport { EmotionIconBase } from '@emotion-icons/emotion-icon';\nexport var PlayArrow = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var attrs = {\n    \"fill\": \"currentColor\",\n    \"xmlns\": \"http://www.w3.org/2000/svg\"\n  };\n  return /*#__PURE__*/React.createElement(EmotionIconBase, _extends({\n    iconAttrs: attrs,\n    iconVerticalAlign: \"middle\",\n    iconViewBox: \"0 0 24 24\"\n  }, props, {\n    ref: ref\n  }), /*#__PURE__*/React.createElement(\"rect\", {\n    width: 24,\n    height: 24,\n    fill: \"none\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M8 6.82v10.36c0 .79.87 1.27 1.54.84l8.14-5.18a1 1 0 000-1.69L9.54 5.98A.998.998 0 008 6.82z\"\n  }));\n});\nPlayArrow.displayName = 'PlayArrow';\nexport var PlayArrowDimensions = {\n  height: 24,\n  width: 24\n};","import _extends from \"@babel/runtime/helpers/extends\";\nimport * as React from 'react';\nimport { EmotionIconBase } from '@emotion-icons/emotion-icon';\nexport var Refresh = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var attrs = {\n    \"fill\": \"currentColor\",\n    \"xmlns\": \"http://www.w3.org/2000/svg\"\n  };\n  return /*#__PURE__*/React.createElement(EmotionIconBase, _extends({\n    iconAttrs: attrs,\n    iconVerticalAlign: \"middle\",\n    iconViewBox: \"0 0 24 24\"\n  }, props, {\n    ref: ref\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"none\",\n    d: \"M0 0h24v24H0V0z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M17.65 6.35a7.95 7.95 0 00-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 007.21-4.56c.32-.67-.16-1.44-.9-1.44-.37 0-.72.2-.88.53a5.994 5.994 0 01-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0112 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71l-.64.65z\"\n  }));\n});\nRefresh.displayName = 'Refresh';\nexport var RefreshDimensions = {\n  height: 24,\n  width: 24\n};","import _extends from \"@babel/runtime/helpers/extends\";\nimport * as React from 'react';\nimport { EmotionIconBase } from '@emotion-icons/emotion-icon';\nexport var StopCircle = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var attrs = {\n    \"fill\": \"currentColor\",\n    \"xmlns\": \"http://www.w3.org/2000/svg\"\n  };\n  return /*#__PURE__*/React.createElement(EmotionIconBase, _extends({\n    iconAttrs: attrs,\n    iconVerticalAlign: \"middle\",\n    iconViewBox: \"0 0 24 24\"\n  }, props, {\n    ref: ref\n  }), /*#__PURE__*/React.createElement(\"g\", {\n    fill: \"none\"\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    width: 24,\n    height: 24\n  }), /*#__PURE__*/React.createElement(\"rect\", {\n    width: 24,\n    height: 24\n  })), /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M9 16h6c.55 0 1-.45 1-1V9c0-.55-.45-1-1-1H9c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1zm3-14C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z\"\n  }));\n});\nStopCircle.displayName = 'StopCircle';\nexport var StopCircleDimensions = {\n  height: 24,\n  width: 24\n};","function t(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{h(n.next(t))}catch(t){r(t)}}function a(t){try{h(n.throw(t))}catch(t){r(t)}}function h(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((n=n.apply(t,e||[])).next())}))}\"function\"==typeof SuppressedError&&SuppressedError;class e{constructor(){this.listeners={}}on(t,e,i){if(this.listeners[t]||(this.listeners[t]=new Set),null==i?void 0:i.once){const i=(...n)=>{this.un(t,i),e(...n)};return this.listeners[t].add(i),()=>this.un(t,i)}return this.listeners[t].add(e),()=>this.un(t,e)}un(t,e){var i;null===(i=this.listeners[t])||void 0===i||i.delete(e)}once(t,e){return this.on(t,e,{once:!0})}unAll(){this.listeners={}}emit(t,...e){this.listeners[t]&&this.listeners[t].forEach((t=>t(...e)))}}const i={decode:function(e,i){return t(this,void 0,void 0,(function*(){const t=new AudioContext({sampleRate:i});try{return yield t.decodeAudioData(e)}finally{t.close()}}))},createBuffer:function(t,e){if(!t||0===t.length)throw new Error(\"channelData must be a non-empty array\");if(e<=0)throw new Error(\"duration must be greater than 0\");if(\"number\"==typeof t[0]&&(t=[t]),!t[0]||0===t[0].length)throw new Error(\"channelData must contain non-empty channel arrays\");!function(t){const e=t[0];if(e.some((t=>t>1||t<-1))){const i=e.length;let n=0;for(let t=0;t<i;t++){const i=Math.abs(e[t]);i>n&&(n=i)}for(const e of t)for(let t=0;t<i;t++)e[t]/=n}}(t);const i=t.map((t=>t instanceof Float32Array?t:Float32Array.from(t)));return{duration:e,length:i[0].length,sampleRate:i[0].length/e,numberOfChannels:i.length,getChannelData:t=>{const e=i[t];if(!e)throw new Error(`Channel ${t} not found`);return e},copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function n(t,e){const i=e.xmlns?document.createElementNS(e.xmlns,t):document.createElement(t);for(const[t,s]of Object.entries(e))if(\"children\"===t&&s)for(const[t,e]of Object.entries(s))e instanceof Node?i.appendChild(e):\"string\"==typeof e?i.appendChild(document.createTextNode(e)):i.appendChild(n(t,e));else\"style\"===t?Object.assign(i.style,s):\"textContent\"===t?i.textContent=s:i.setAttribute(t,s.toString());return i}function s(t,e,i){const s=n(t,e||{});return null==i||i.appendChild(s),s}var r=Object.freeze({__proto__:null,createElement:s,default:s});const o={fetchBlob:function(e,i,n){return t(this,void 0,void 0,(function*(){const s=yield fetch(e,n);if(s.status>=400)throw new Error(`Failed to fetch ${e}: ${s.status} (${s.statusText})`);return function(e,i){t(this,void 0,void 0,(function*(){if(!e.body||!e.headers)return;const t=e.body.getReader(),n=Number(e.headers.get(\"Content-Length\"))||0;let s=0;const r=t=>{s+=(null==t?void 0:t.length)||0;const e=Math.round(s/n*100);i(e)};try{for(;;){const e=yield t.read();if(e.done)break;r(e.value)}}catch(t){console.warn(\"Progress tracking error:\",t)}}))}(s.clone(),i),s.blob()}))}};class a extends e{constructor(t){super(),this.isExternalMedia=!1,t.media?(this.media=t.media,this.isExternalMedia=!0):this.media=document.createElement(\"audio\"),t.mediaControls&&(this.media.controls=!0),t.autoplay&&(this.media.autoplay=!0),null!=t.playbackRate&&this.onMediaEvent(\"canplay\",(()=>{null!=t.playbackRate&&(this.media.playbackRate=t.playbackRate)}),{once:!0})}onMediaEvent(t,e,i){return this.media.addEventListener(t,e,i),()=>this.media.removeEventListener(t,e,i)}getSrc(){return this.media.currentSrc||this.media.src||\"\"}revokeSrc(){const t=this.getSrc();t.startsWith(\"blob:\")&&URL.revokeObjectURL(t)}canPlayType(t){return\"\"!==this.media.canPlayType(t)}setSrc(t,e){const i=this.getSrc();if(t&&i===t)return;this.revokeSrc();const n=e instanceof Blob&&(this.canPlayType(e.type)||!t)?URL.createObjectURL(e):t;if(i&&this.media.removeAttribute(\"src\"),n||t)try{this.media.src=n}catch(e){this.media.src=t}}destroy(){this.isExternalMedia||(this.media.pause(),this.revokeSrc(),this.media.removeAttribute(\"src\"),this.media.load(),this.media.remove())}setMediaElement(t){this.media=t}play(){return t(this,void 0,void 0,(function*(){try{return yield this.media.play()}catch(t){if(t instanceof DOMException&&\"AbortError\"===t.name)return;throw t}}))}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(t){this.media.currentTime=Math.max(0,Math.min(t,this.getDuration()))}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(t){this.media.volume=t}getMuted(){return this.media.muted}setMuted(t){this.media.muted=t}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(t,e){null!=e&&(this.media.preservesPitch=e),this.media.playbackRate=t}getMediaElement(){return this.media}setSinkId(t){return this.media.setSinkId(t)}}function h(t){return t<0?0:t>1?1:t}function l({maxTop:t,maxBottom:e,halfHeight:i,vScale:n}){const s=Math.round(t*i*n);return{topHeight:s,totalHeight:s+Math.round(e*i*n)||1}}function c({barAlign:t,halfHeight:e,topHeight:i,totalHeight:n,canvasHeight:s}){return\"top\"===t?0:\"bottom\"===t?s-n:e-i}function d(t,e,i){const n=e-t.left,s=i-t.top;return[n/t.width,s/t.height]}function u(t){return Boolean(t.barWidth||t.barGap||t.barAlign)}function p(t,e){if(!u(e))return t;const i=e.barWidth||.5,n=i+(e.barGap||i/2);return 0===n?t:Math.floor(t/n)*n}function m({scrollLeft:t,totalWidth:e,numCanvases:i}){if(0===e)return[0];const n=t/e,s=Math.floor(n*i);return[s-1,s,s+1]}function f({scrollLeft:t,clientWidth:e,scrollWidth:i}){if(0===i)return{startX:0,endX:0};return{startX:t/i,endX:(t+e)/i}}class g extends e{constructor(t,e){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.subscriptions=[],this.unsubscribeOnScroll=[],this.dragUnsubscribe=null,this.subscriptions=[],this.options=t;const i=this.parentFromOptionsContainer(t.container);this.parent=i;const[n,s]=this.initHtml();i.appendChild(n),this.container=n,this.scrollContainer=s.querySelector(\".scroll\"),this.wrapper=s.querySelector(\".wrapper\"),this.canvasWrapper=s.querySelector(\".canvases\"),this.progressWrapper=s.querySelector(\".progress\"),this.cursor=s.querySelector(\".cursor\"),e&&s.appendChild(e),this.initEvents()}parentFromOptionsContainer(t){let e;if(\"string\"==typeof t?e=document.querySelector(t):t instanceof HTMLElement&&(e=t),!e)throw new Error(\"Container not found\");return e}initEvents(){if(this.wrapper.addEventListener(\"click\",(t=>{const e=this.wrapper.getBoundingClientRect(),[i,n]=d(e,t.clientX,t.clientY);this.emit(\"click\",i,n)})),this.wrapper.addEventListener(\"dblclick\",(t=>{const e=this.wrapper.getBoundingClientRect(),[i,n]=d(e,t.clientX,t.clientY);this.emit(\"dblclick\",i,n)})),!0!==this.options.dragToSeek&&\"object\"!=typeof this.options.dragToSeek||this.initDrag(),this.scrollContainer.addEventListener(\"scroll\",(()=>{const{scrollLeft:t,scrollWidth:e,clientWidth:i}=this.scrollContainer,{startX:n,endX:s}=f({scrollLeft:t,scrollWidth:e,clientWidth:i});this.emit(\"scroll\",n,s,t,t+i)})),\"function\"==typeof ResizeObserver){const t=this.createDelay(100);this.resizeObserver=new ResizeObserver((()=>{t().then((()=>this.onContainerResize())).catch((()=>{}))})),this.resizeObserver.observe(this.scrollContainer)}}onContainerResize(){const t=this.parent.clientWidth;t===this.lastContainerWidth&&\"auto\"!==this.options.height||(this.lastContainerWidth=t,this.reRender(),this.emit(\"resize\"))}initDrag(){this.dragUnsubscribe||(this.dragUnsubscribe=function(t,e,i,n,s=3,r=0,o=100){if(!t)return()=>{};const a=new Map,h=matchMedia(\"(pointer: coarse)\").matches;let l=()=>{};const c=c=>{if(c.button!==r)return;if(a.set(c.pointerId,c),a.size>1)return;let d=c.clientX,u=c.clientY,p=!1;const m=Date.now(),f=n=>{if(n.defaultPrevented||a.size>1)return;if(h&&Date.now()-m<o)return;const r=n.clientX,l=n.clientY,c=r-d,f=l-u;if(p||Math.abs(c)>s||Math.abs(f)>s){n.preventDefault(),n.stopPropagation();const s=t.getBoundingClientRect(),{left:o,top:a}=s;p||(null==i||i(d-o,u-a),p=!0),e(c,f,r-o,l-a),d=r,u=l}},g=e=>{if(a.delete(e.pointerId),p){const i=e.clientX,s=e.clientY,r=t.getBoundingClientRect(),{left:o,top:a}=r;null==n||n(i-o,s-a)}l()},v=t=>{a.delete(t.pointerId),t.relatedTarget&&t.relatedTarget!==document.documentElement||g(t)},b=t=>{p&&(t.stopPropagation(),t.preventDefault())},y=t=>{t.defaultPrevented||a.size>1||p&&t.preventDefault()};document.addEventListener(\"pointermove\",f),document.addEventListener(\"pointerup\",g),document.addEventListener(\"pointerout\",v),document.addEventListener(\"pointercancel\",v),document.addEventListener(\"touchmove\",y,{passive:!1}),document.addEventListener(\"click\",b,{capture:!0}),l=()=>{document.removeEventListener(\"pointermove\",f),document.removeEventListener(\"pointerup\",g),document.removeEventListener(\"pointerout\",v),document.removeEventListener(\"pointercancel\",v),document.removeEventListener(\"touchmove\",y),setTimeout((()=>{document.removeEventListener(\"click\",b,{capture:!0})}),10)}};return t.addEventListener(\"pointerdown\",c),()=>{l(),t.removeEventListener(\"pointerdown\",c),a.clear()}}(this.wrapper,((t,e,i)=>{const n=this.wrapper.getBoundingClientRect().width;this.emit(\"drag\",h(i/n))}),(t=>{this.isDragging=!0;const e=this.wrapper.getBoundingClientRect().width;this.emit(\"dragstart\",h(t/e))}),(t=>{this.isDragging=!1;const e=this.wrapper.getBoundingClientRect().width;this.emit(\"dragend\",h(t/e))})),this.subscriptions.push(this.dragUnsubscribe))}initHtml(){const t=document.createElement(\"div\"),e=t.attachShadow({mode:\"open\"}),i=this.options.cspNonce&&\"string\"==typeof this.options.cspNonce?this.options.cspNonce.replace(/\"/g,\"\"):\"\";return e.innerHTML=`\\n      <style${i?` nonce=\"${i}\"`:\"\"}>\\n        :host {\\n          user-select: none;\\n          min-width: 1px;\\n        }\\n        :host audio {\\n          display: block;\\n          width: 100%;\\n        }\\n        :host .scroll {\\n          overflow-x: auto;\\n          overflow-y: hidden;\\n          width: 100%;\\n          position: relative;\\n        }\\n        :host .noScrollbar {\\n          scrollbar-color: transparent;\\n          scrollbar-width: none;\\n        }\\n        :host .noScrollbar::-webkit-scrollbar {\\n          display: none;\\n          -webkit-appearance: none;\\n        }\\n        :host .wrapper {\\n          position: relative;\\n          overflow: visible;\\n          z-index: 2;\\n        }\\n        :host .canvases {\\n          min-height: ${this.getHeight(this.options.height,this.options.splitChannels)}px;\\n          pointer-events: none;\\n        }\\n        :host .canvases > div {\\n          position: relative;\\n        }\\n        :host canvas {\\n          display: block;\\n          position: absolute;\\n          top: 0;\\n          image-rendering: pixelated;\\n        }\\n        :host .progress {\\n          pointer-events: none;\\n          position: absolute;\\n          z-index: 2;\\n          top: 0;\\n          left: 0;\\n          width: 0;\\n          height: 100%;\\n          overflow: hidden;\\n        }\\n        :host .progress > div {\\n          position: relative;\\n        }\\n        :host .cursor {\\n          pointer-events: none;\\n          position: absolute;\\n          z-index: 5;\\n          top: 0;\\n          left: 0;\\n          height: 100%;\\n          border-radius: 2px;\\n        }\\n      </style>\\n\\n      <div class=\"scroll\" part=\"scroll\">\\n        <div class=\"wrapper\" part=\"wrapper\">\\n          <div class=\"canvases\" part=\"canvases\"></div>\\n          <div class=\"progress\" part=\"progress\"></div>\\n          <div class=\"cursor\" part=\"cursor\"></div>\\n        </div>\\n      </div>\\n    `,[t,e]}setOptions(t){if(this.options.container!==t.container){const e=this.parentFromOptionsContainer(t.container);e.appendChild(this.container),this.parent=e}!0!==t.dragToSeek&&\"object\"!=typeof this.options.dragToSeek||this.initDrag(),this.options=t,this.reRender()}getWrapper(){return this.wrapper}getWidth(){return this.scrollContainer.clientWidth}getScroll(){return this.scrollContainer.scrollLeft}setScroll(t){this.scrollContainer.scrollLeft=t}setScrollPercentage(t){const{scrollWidth:e}=this.scrollContainer,i=e*t;this.setScroll(i)}destroy(){var t;this.subscriptions.forEach((t=>t())),this.container.remove(),this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null),null===(t=this.unsubscribeOnScroll)||void 0===t||t.forEach((t=>t())),this.unsubscribeOnScroll=[]}createDelay(t=10){let e,i;const n=()=>{e&&(clearTimeout(e),e=void 0),i&&(i(),i=void 0)};return this.timeouts.push(n),()=>new Promise(((s,r)=>{n(),i=r,e=setTimeout((()=>{e=void 0,i=void 0,s()}),t)}))}getHeight(t,e){var i;const n=(null===(i=this.audioData)||void 0===i?void 0:i.numberOfChannels)||1;return function({optionsHeight:t,optionsSplitChannels:e,parentHeight:i,numberOfChannels:n,defaultHeight:s=128}){if(null==t)return s;const r=Number(t);if(!isNaN(r))return r;if(\"auto\"===t){const t=i||s;return(null==e?void 0:e.every((t=>!t.overlay)))?t/n:t}return s}({optionsHeight:t,optionsSplitChannels:e,parentHeight:this.parent.clientHeight,numberOfChannels:n,defaultHeight:128})}convertColorValues(t){return function(t,e){if(!Array.isArray(t))return t||\"\";if(0===t.length)return\"#999\";if(t.length<2)return t[0]||\"\";const i=document.createElement(\"canvas\"),n=i.getContext(\"2d\"),s=i.height*e,r=n.createLinearGradient(0,0,0,s||e),o=1/(t.length-1);return t.forEach(((t,e)=>{r.addColorStop(e*o,t)})),r}(t,this.getPixelRatio())}getPixelRatio(){return t=window.devicePixelRatio,Math.max(1,t||1);var t}renderBarWaveform(t,e,i,n){const{width:s,height:r}=i.canvas,{halfHeight:o,barWidth:a,barRadius:h,barIndexScale:d,barSpacing:u}=function({width:t,height:e,length:i,options:n,pixelRatio:s}){const r=e/2,o=n.barWidth?n.barWidth*s:1,a=n.barGap?n.barGap*s:n.barWidth?o/2:0,h=o+a||1;return{halfHeight:r,barWidth:o,barGap:a,barRadius:n.barRadius||0,barIndexScale:i>0?t/h/i:0,barSpacing:h}}({width:s,height:r,length:(t[0]||[]).length,options:e,pixelRatio:this.getPixelRatio()}),p=function({channelData:t,barIndexScale:e,barSpacing:i,barWidth:n,halfHeight:s,vScale:r,canvasHeight:o,barAlign:a}){const h=t[0]||[],d=t[1]||h,u=h.length,p=[];let m=0,f=0,g=0;for(let t=0;t<=u;t++){const u=Math.round(t*e);if(u>m){const{topHeight:t,totalHeight:e}=l({maxTop:f,maxBottom:g,halfHeight:s,vScale:r}),h=c({barAlign:a,halfHeight:s,topHeight:t,totalHeight:e,canvasHeight:o});p.push({x:m*i,y:h,width:n,height:e}),m=u,f=0,g=0}const v=Math.abs(h[t]||0),b=Math.abs(d[t]||0);v>f&&(f=v),b>g&&(g=b)}return p}({channelData:t,barIndexScale:d,barSpacing:u,barWidth:a,halfHeight:o,vScale:n,canvasHeight:r,barAlign:e.barAlign});i.beginPath();for(const t of p)h&&\"roundRect\"in i?i.roundRect(t.x,t.y,t.width,t.height,h):i.rect(t.x,t.y,t.width,t.height);i.fill(),i.closePath()}renderLineWaveform(t,e,i,n){const{width:s,height:r}=i.canvas,o=function({channelData:t,width:e,height:i,vScale:n}){const s=i/2,r=t[0]||[];return[r,t[1]||r].map(((t,i)=>{const r=t.length,o=r?e/r:0,a=s,h=0===i?-1:1,l=[{x:0,y:a}];let c=0,d=0;for(let e=0;e<=r;e++){const i=Math.round(e*o);if(i>c){const t=a+(Math.round(d*s*n)||1)*h;l.push({x:c,y:t}),c=i,d=0}const r=Math.abs(t[e]||0);r>d&&(d=r)}return l.push({x:c,y:a}),l}))}({channelData:t,width:s,height:r,vScale:n});i.beginPath();for(const t of o)if(t.length){i.moveTo(t[0].x,t[0].y);for(let e=1;e<t.length;e++){const n=t[e];i.lineTo(n.x,n.y)}}i.fill(),i.closePath()}renderWaveform(t,e,i){if(i.fillStyle=this.convertColorValues(e.waveColor),e.renderFunction)return void e.renderFunction(t,i);const n=function({channelData:t,barHeight:e,normalize:i}){var n;const s=e||1;if(!i)return s;const r=t[0];if(!r||0===r.length)return s;let o=0;for(let t=0;t<r.length;t++){const e=null!==(n=r[t])&&void 0!==n?n:0,i=Math.abs(e);i>o&&(o=i)}return o?s/o:s}({channelData:t,barHeight:e.barHeight,normalize:e.normalize});u(e)?this.renderBarWaveform(t,e,i,n):this.renderLineWaveform(t,e,i,n)}renderSingleCanvas(t,e,i,n,s,r,o){const a=this.getPixelRatio(),h=document.createElement(\"canvas\");h.width=Math.round(i*a),h.height=Math.round(n*a),h.style.width=`${i}px`,h.style.height=`${n}px`,h.style.left=`${Math.round(s)}px`,r.appendChild(h);const l=h.getContext(\"2d\");if(e.renderFunction?(l.fillStyle=this.convertColorValues(e.waveColor),e.renderFunction(t,l)):this.renderWaveform(t,e,l),h.width>0&&h.height>0){const t=h.cloneNode(),i=t.getContext(\"2d\");i.drawImage(h,0,0),i.globalCompositeOperation=\"source-in\",i.fillStyle=this.convertColorValues(e.progressColor),i.fillRect(0,0,h.width,h.height),o.appendChild(t)}}renderMultiCanvas(t,e,i,n,s,r){const o=this.getPixelRatio(),{clientWidth:a}=this.scrollContainer,h=i/o,l=function({clientWidth:t,totalWidth:e,options:i}){return p(Math.min(8e3,t,e),i)}({clientWidth:a,totalWidth:h,options:e});let c={};if(0===l)return;const d=i=>{if(i<0||i>=u)return;if(c[i])return;c[i]=!0;const o=i*l;let a=Math.min(h-o,l);if(a=p(a,e),a<=0)return;const d=function({channelData:t,offset:e,clampedWidth:i,totalWidth:n}){return t.map((t=>{const s=Math.floor(e/n*t.length),r=Math.floor((e+i)/n*t.length);return t.slice(s,r)}))}({channelData:t,offset:o,clampedWidth:a,totalWidth:h});this.renderSingleCanvas(d,e,a,n,o,s,r)},u=Math.ceil(h/l);if(!this.isScrollable){for(let t=0;t<u;t++)d(t);return}if(m({scrollLeft:this.scrollContainer.scrollLeft,totalWidth:h,numCanvases:u}).forEach((t=>d(t))),u>1){const t=this.on(\"scroll\",(()=>{const{scrollLeft:t}=this.scrollContainer;Object.keys(c).length>10&&(s.innerHTML=\"\",r.innerHTML=\"\",c={}),m({scrollLeft:t,totalWidth:h,numCanvases:u}).forEach((t=>d(t)))}));this.unsubscribeOnScroll.push(t)}}renderChannel(t,e,i,n){var{overlay:s}=e,r=function(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(null!=t&&\"function\"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(i[n[s]]=t[n[s]])}return i}(e,[\"overlay\"]);const o=document.createElement(\"div\"),a=this.getHeight(r.height,r.splitChannels);o.style.height=`${a}px`,s&&n>0&&(o.style.marginTop=`-${a}px`),this.canvasWrapper.style.minHeight=`${a}px`,this.canvasWrapper.appendChild(o);const h=o.cloneNode();this.progressWrapper.appendChild(h),this.renderMultiCanvas(t,r,i,a,o,h)}render(e){return t(this,void 0,void 0,(function*(){var t;this.timeouts.forEach((t=>t())),this.timeouts=[],this.canvasWrapper.innerHTML=\"\",this.progressWrapper.innerHTML=\"\",null!=this.options.width&&(this.scrollContainer.style.width=\"number\"==typeof this.options.width?`${this.options.width}px`:this.options.width);const i=this.getPixelRatio(),n=this.scrollContainer.clientWidth,{scrollWidth:s,isScrollable:r,useParentWidth:o,width:a}=function({duration:t,minPxPerSec:e=0,parentWidth:i,fillParent:n,pixelRatio:s}){const r=Math.ceil(t*e),o=r>i,a=Boolean(n&&!o);return{scrollWidth:r,isScrollable:o,useParentWidth:a,width:(a?i:r)*s}}({duration:e.duration,minPxPerSec:this.options.minPxPerSec||0,parentWidth:n,fillParent:this.options.fillParent,pixelRatio:i});if(this.isScrollable=r,this.wrapper.style.width=o?\"100%\":`${s}px`,this.scrollContainer.style.overflowX=this.isScrollable?\"auto\":\"hidden\",this.scrollContainer.classList.toggle(\"noScrollbar\",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.audioData=e,this.emit(\"render\"),this.options.splitChannels)for(let i=0;i<e.numberOfChannels;i++){const n=Object.assign(Object.assign({},this.options),null===(t=this.options.splitChannels)||void 0===t?void 0:t[i]);this.renderChannel([e.getChannelData(i)],n,a,i)}else{const t=[e.getChannelData(0)];e.numberOfChannels>1&&t.push(e.getChannelData(1)),this.renderChannel(t,this.options,a,0)}Promise.resolve().then((()=>this.emit(\"rendered\")))}))}reRender(){if(this.unsubscribeOnScroll.forEach((t=>t())),this.unsubscribeOnScroll=[],!this.audioData)return;const{scrollWidth:t}=this.scrollContainer,{right:e}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&t!==this.scrollContainer.scrollWidth){const{right:t}=this.progressWrapper.getBoundingClientRect(),i=function(t){const e=2*t;return(e<0?Math.floor(e):Math.ceil(e))/2}(t-e);this.scrollContainer.scrollLeft+=i}}zoom(t){this.options.minPxPerSec=t,this.reRender()}scrollIntoView(t,e=!1){const{scrollLeft:i,scrollWidth:n,clientWidth:s}=this.scrollContainer,r=t*n,o=i,a=i+s,h=s/2;if(this.isDragging){const t=30;r+t>a?this.scrollContainer.scrollLeft+=t:r-t<o&&(this.scrollContainer.scrollLeft-=t)}else{(r<o||r>a)&&(this.scrollContainer.scrollLeft=r-(this.options.autoCenter?h:0));const t=r-i-h;e&&this.options.autoCenter&&t>0&&(this.scrollContainer.scrollLeft+=t)}{const t=this.scrollContainer.scrollLeft,{startX:e,endX:i}=f({scrollLeft:t,scrollWidth:n,clientWidth:s});this.emit(\"scroll\",e,i,t,t+s)}}renderProgress(t,e){if(isNaN(t))return;const i=100*t;this.canvasWrapper.style.clipPath=`polygon(${i}% 0%, 100% 0%, 100% 100%, ${i}% 100%)`,this.progressWrapper.style.width=`${i}%`,this.cursor.style.left=`${i}%`,this.cursor.style.transform=this.options.cursorWidth?`translateX(-${t*this.options.cursorWidth}px)`:\"\",this.isScrollable&&this.options.autoScroll&&this.scrollIntoView(t,e)}exportImage(e,i,n){return t(this,void 0,void 0,(function*(){const t=this.canvasWrapper.querySelectorAll(\"canvas\");if(!t.length)throw new Error(\"No waveform data\");if(\"dataURL\"===n){const n=Array.from(t).map((t=>t.toDataURL(e,i)));return Promise.resolve(n)}return Promise.all(Array.from(t).map((t=>new Promise(((n,s)=>{t.toBlob((t=>{t?n(t):s(new Error(\"Could not export image\"))}),e,i)})))))}))}}class v extends e{constructor(){super(...arguments),this.animationFrameId=null,this.isRunning=!1}start(){if(this.isRunning)return;this.isRunning=!0;const t=()=>{this.isRunning&&(this.emit(\"tick\"),this.animationFrameId=requestAnimationFrame(t))};t()}stop(){this.isRunning=!1,null!==this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null)}destroy(){this.stop()}}class b extends e{constructor(t=new AudioContext){super(),this.bufferNode=null,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this._playbackRate=1,this._duration=void 0,this.buffer=null,this.currentSrc=\"\",this.paused=!0,this.crossOrigin=null,this.seeking=!1,this.autoplay=!1,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=t,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return t(this,void 0,void 0,(function*(){}))}get src(){return this.currentSrc}set src(t){if(this.currentSrc=t,this._duration=void 0,!t)return this.buffer=null,void this.emit(\"emptied\");fetch(t).then((e=>{if(e.status>=400)throw new Error(`Failed to fetch ${t}: ${e.status} (${e.statusText})`);return e.arrayBuffer()})).then((e=>this.currentSrc!==t?null:this.audioContext.decodeAudioData(e))).then((e=>{this.currentSrc===t&&(this.buffer=e,this.emit(\"loadedmetadata\"),this.emit(\"canplay\"),this.autoplay&&this.play())})).catch((t=>{console.error(\"WebAudioPlayer load error:\",t)}))}_play(){if(!this.paused)return;this.paused=!1,this.bufferNode&&(this.bufferNode.onended=null,this.bufferNode.disconnect()),this.bufferNode=this.audioContext.createBufferSource(),this.buffer&&(this.bufferNode.buffer=this.buffer),this.bufferNode.playbackRate.value=this._playbackRate,this.bufferNode.connect(this.gainNode);let t=this.playedDuration*this._playbackRate;(t>=this.duration||t<0)&&(t=0,this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,t),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit(\"ended\"))}}_pause(){var t;this.paused=!0,null===(t=this.bufferNode)||void 0===t||t.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime}play(){return t(this,void 0,void 0,(function*(){this.paused&&(this._play(),this.emit(\"play\"))}))}pause(){this.paused||(this._pause(),this.emit(\"pause\"))}stopAt(t){const e=t-this.currentTime,i=this.bufferNode;null==i||i.stop(this.audioContext.currentTime+e),null==i||i.addEventListener(\"ended\",(()=>{i===this.bufferNode&&(this.bufferNode=null,this.pause())}),{once:!0})}setSinkId(e){return t(this,void 0,void 0,(function*(){return this.audioContext.setSinkId(e)}))}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this.bufferNode&&(this.bufferNode.playbackRate.value=t)}get currentTime(){return(this.paused?this.playedDuration:this.playedDuration+(this.audioContext.currentTime-this.playStartTime))*this._playbackRate}set currentTime(t){const e=!this.paused;e&&this._pause(),this.playedDuration=t/this._playbackRate,e&&this._play(),this.emit(\"seeking\"),this.emit(\"timeupdate\")}get duration(){var t,e;return null!==(t=this._duration)&&void 0!==t?t:(null===(e=this.buffer)||void 0===e?void 0:e.duration)||0}set duration(t){this._duration=t}get volume(){return this.gainNode.gain.value}set volume(t){this.gainNode.gain.value=t,this.emit(\"volumechange\")}get muted(){return this._muted}set muted(t){this._muted!==t&&(this._muted=t,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(t){return/^(audio|video)\\//.test(t)}getGainNode(){return this.gainNode}getChannelData(){const t=[];if(!this.buffer)return t;const e=this.buffer.numberOfChannels;for(let i=0;i<e;i++)t.push(this.buffer.getChannelData(i));return t}removeAttribute(t){switch(t){case\"src\":this.src=\"\";break;case\"playbackRate\":this.playbackRate=0;break;case\"currentTime\":this.currentTime=0;break;case\"duration\":this.duration=0;break;case\"volume\":this.volume=0;break;case\"muted\":this.muted=!1}}}const y={waveColor:\"#999\",progressColor:\"#555\",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};class C extends a{static create(t){return new C(t)}constructor(t){const e=t.media||(\"WebAudio\"===t.backend?new b:void 0);super({media:e,mediaControls:t.mediaControls,autoplay:t.autoplay,playbackRate:t.audioRate}),this.plugins=[],this.decodedData=null,this.stopAtPosition=null,this.subscriptions=[],this.mediaSubscriptions=[],this.abortController=null,this.options=Object.assign({},y,t),this.timer=new v;const i=e?void 0:this.getMediaElement();this.renderer=new g(this.options,i),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initPlugins();const n=this.options.url||this.getSrc()||\"\";Promise.resolve().then((()=>{this.emit(\"init\");const{peaks:t,duration:e}=this.options;(n||t&&e)&&this.load(n,t,e).catch((t=>{this.emit(\"error\",t instanceof Error?t:new Error(String(t)))}))}))}updateProgress(t=this.getCurrentTime()){return this.renderer.renderProgress(t/this.getDuration(),this.isPlaying()),t}initTimerEvents(){this.subscriptions.push(this.timer.on(\"tick\",(()=>{if(!this.isSeeking()){const t=this.updateProgress();this.emit(\"timeupdate\",t),this.emit(\"audioprocess\",t),null!=this.stopAtPosition&&this.isPlaying()&&t>=this.stopAtPosition&&this.pause()}})))}initPlayerEvents(){this.isPlaying()&&(this.emit(\"play\"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent(\"timeupdate\",(()=>{const t=this.updateProgress();this.emit(\"timeupdate\",t)})),this.onMediaEvent(\"play\",(()=>{this.emit(\"play\"),this.timer.start()})),this.onMediaEvent(\"pause\",(()=>{this.emit(\"pause\"),this.timer.stop(),this.stopAtPosition=null})),this.onMediaEvent(\"emptied\",(()=>{this.timer.stop(),this.stopAtPosition=null})),this.onMediaEvent(\"ended\",(()=>{this.emit(\"timeupdate\",this.getDuration()),this.emit(\"finish\"),this.stopAtPosition=null})),this.onMediaEvent(\"seeking\",(()=>{this.emit(\"seeking\",this.getCurrentTime())})),this.onMediaEvent(\"error\",(()=>{var t;this.emit(\"error\",null!==(t=this.getMediaElement().error)&&void 0!==t?t:new Error(\"Media error\")),this.stopAtPosition=null})))}initRendererEvents(){this.subscriptions.push(this.renderer.on(\"click\",((t,e)=>{this.options.interact&&(this.seekTo(t),this.emit(\"interaction\",t*this.getDuration()),this.emit(\"click\",t,e))})),this.renderer.on(\"dblclick\",((t,e)=>{this.emit(\"dblclick\",t,e)})),this.renderer.on(\"scroll\",((t,e,i,n)=>{const s=this.getDuration();this.emit(\"scroll\",t*s,e*s,i,n)})),this.renderer.on(\"render\",(()=>{this.emit(\"redraw\")})),this.renderer.on(\"rendered\",(()=>{this.emit(\"redrawcomplete\")})),this.renderer.on(\"dragstart\",(t=>{this.emit(\"dragstart\",t)})),this.renderer.on(\"dragend\",(t=>{this.emit(\"dragend\",t)})),this.renderer.on(\"resize\",(()=>{this.emit(\"resize\")})));{let t;const e=this.renderer.on(\"drag\",(e=>{var i;if(!this.options.interact)return;this.renderer.renderProgress(e),clearTimeout(t);let n=0;const s=this.options.dragToSeek;this.isPlaying()?n=0:!0===s?n=200:s&&\"object\"==typeof s&&(n=null!==(i=s.debounceTime)&&void 0!==i?i:200),t=setTimeout((()=>{this.seekTo(e)}),n),this.emit(\"interaction\",e*this.getDuration()),this.emit(\"drag\",e)}));this.subscriptions.push((()=>{clearTimeout(t),e()}))}}initPlugins(){var t;(null===(t=this.options.plugins)||void 0===t?void 0:t.length)&&this.options.plugins.forEach((t=>{this.registerPlugin(t)}))}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach((t=>t())),this.mediaSubscriptions=[]}setOptions(t){this.options=Object.assign({},this.options,t),t.duration&&!t.peaks&&(this.decodedData=i.createBuffer(this.exportPeaks(),t.duration)),t.peaks&&t.duration&&(this.decodedData=i.createBuffer(t.peaks,t.duration)),this.renderer.setOptions(this.options),t.audioRate&&this.setPlaybackRate(t.audioRate),null!=t.mediaControls&&(this.getMediaElement().controls=t.mediaControls)}registerPlugin(t){if(this.plugins.includes(t))return t;t._init(this),this.plugins.push(t);const e=t.once(\"destroy\",(()=>{this.plugins=this.plugins.filter((e=>e!==t)),this.subscriptions=this.subscriptions.filter((t=>t!==e))}));return this.subscriptions.push(e),t}unregisterPlugin(t){this.plugins=this.plugins.filter((e=>e!==t)),t.destroy()}getWrapper(){return this.renderer.getWrapper()}getWidth(){return this.renderer.getWidth()}getScroll(){return this.renderer.getScroll()}setScroll(t){return this.renderer.setScroll(t)}setScrollTime(t){const e=t/this.getDuration();this.renderer.setScrollPercentage(e)}getActivePlugins(){return this.plugins}loadAudio(e,n,s,r){return t(this,void 0,void 0,(function*(){var t;if(this.emit(\"load\",e),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,this.stopAtPosition=null,null===(t=this.abortController)||void 0===t||t.abort(),this.abortController=null,!n&&!s){const t=this.options.fetchParams||{};window.AbortController&&!t.signal&&(this.abortController=new AbortController,t.signal=this.abortController.signal);const i=t=>this.emit(\"loading\",t);n=yield o.fetchBlob(e,i,t);const s=this.options.blobMimeType;s&&(n=new Blob([n],{type:s}))}this.setSrc(e,n);const a=yield new Promise((t=>{const e=r||this.getDuration();e?t(e):this.mediaSubscriptions.push(this.onMediaEvent(\"loadedmetadata\",(()=>t(this.getDuration())),{once:!0}))}));if(!e&&!n){const t=this.getMediaElement();t instanceof b&&(t.duration=a)}if(s)this.decodedData=i.createBuffer(s,a||0);else if(n){const t=yield n.arrayBuffer();this.decodedData=yield i.decode(t,this.options.sampleRate)}this.decodedData&&(this.emit(\"decode\",this.getDuration()),this.renderer.render(this.decodedData)),this.emit(\"ready\",this.getDuration())}))}load(e,i,n){return t(this,void 0,void 0,(function*(){try{return yield this.loadAudio(e,void 0,i,n)}catch(t){throw this.emit(\"error\",t),t}}))}loadBlob(e,i,n){return t(this,void 0,void 0,(function*(){try{return yield this.loadAudio(\"\",e,i,n)}catch(t){throw this.emit(\"error\",t),t}}))}zoom(t){if(!this.decodedData)throw new Error(\"No audio loaded\");this.renderer.zoom(t),this.emit(\"zoom\",t)}getDecodedData(){return this.decodedData}exportPeaks({channels:t=2,maxLength:e=8e3,precision:i=1e4}={}){if(!this.decodedData)throw new Error(\"The audio has not been decoded yet\");const n=Math.min(t,this.decodedData.numberOfChannels),s=[];for(let t=0;t<n;t++){const n=this.decodedData.getChannelData(t),r=[],o=n.length/e;for(let t=0;t<e;t++){const e=n.slice(Math.floor(t*o),Math.ceil((t+1)*o));let s=0;for(let t=0;t<e.length;t++){const i=e[t];Math.abs(i)>Math.abs(s)&&(s=i)}r.push(Math.round(s*i)/i)}s.push(r)}return s}getDuration(){let t=super.getDuration()||0;return 0!==t&&t!==1/0||!this.decodedData||(t=this.decodedData.duration),t}toggleInteraction(t){this.options.interact=t}setTime(t){this.stopAtPosition=null,super.setTime(t),this.updateProgress(t),this.emit(\"timeupdate\",t)}seekTo(t){const e=this.getDuration()*t;this.setTime(e)}play(e,i){const n=Object.create(null,{play:{get:()=>super.play}});return t(this,void 0,void 0,(function*(){null!=e&&this.setTime(e);const t=yield n.play.call(this);return null!=i&&(this.media instanceof b?this.media.stopAt(i):this.stopAtPosition=i),t}))}playPause(){return t(this,void 0,void 0,(function*(){return this.isPlaying()?this.pause():this.play()}))}stop(){this.pause(),this.setTime(0)}skip(t){this.setTime(this.getCurrentTime()+t)}empty(){this.load(\"\",[[0]],.001)}setMediaElement(t){this.unsubscribePlayerEvents(),super.setMediaElement(t),this.initPlayerEvents()}exportImage(){return t(this,arguments,void 0,(function*(t=\"image/png\",e=1,i=\"dataURL\"){return this.renderer.exportImage(t,e,i)}))}destroy(){var t;this.emit(\"destroy\"),null===(t=this.abortController)||void 0===t||t.abort(),this.plugins.forEach((t=>t.destroy())),this.subscriptions.forEach((t=>t())),this.unsubscribePlayerEvents(),this.timer.destroy(),this.renderer.destroy(),super.destroy()}}C.BasePlugin=class extends e{constructor(t){super(),this.subscriptions=[],this.isDestroyed=!1,this.options=t}onInit(){}_init(t){this.isDestroyed&&(this.subscriptions=[],this.isDestroyed=!1),this.wavesurfer=t,this.onInit()}destroy(){this.emit(\"destroy\"),this.subscriptions.forEach((t=>t())),this.subscriptions=[],this.isDestroyed=!0,this.wavesurfer=void 0}},C.dom=r;export{C as default};\n","function i(i,t,e,s){return new(e||(e=Promise))((function(r,o){function n(i){try{d(s.next(i))}catch(i){o(i)}}function a(i){try{d(s.throw(i))}catch(i){o(i)}}function d(i){var t;i.done?r(i.value):(t=i.value,t instanceof e?t:new e((function(i){i(t)}))).then(n,a)}d((s=s.apply(i,t||[])).next())}))}\"function\"==typeof SuppressedError&&SuppressedError;class t{constructor(){this.listeners={}}on(i,t,e){if(this.listeners[i]||(this.listeners[i]=new Set),null==e?void 0:e.once){const e=(...s)=>{this.un(i,e),t(...s)};return this.listeners[i].add(e),()=>this.un(i,e)}return this.listeners[i].add(t),()=>this.un(i,t)}un(i,t){var e;null===(e=this.listeners[i])||void 0===e||e.delete(t)}once(i,t){return this.on(i,t,{once:!0})}unAll(){this.listeners={}}emit(i,...t){this.listeners[i]&&this.listeners[i].forEach((i=>i(...t)))}}class e extends t{constructor(i){super(),this.subscriptions=[],this.isDestroyed=!1,this.options=i}onInit(){}_init(i){this.isDestroyed&&(this.subscriptions=[],this.isDestroyed=!1),this.wavesurfer=i,this.onInit()}destroy(){this.emit(\"destroy\"),this.subscriptions.forEach((i=>i())),this.subscriptions=[],this.isDestroyed=!0,this.wavesurfer=void 0}}class s extends t{constructor(){super(...arguments),this.animationFrameId=null,this.isRunning=!1}start(){if(this.isRunning)return;this.isRunning=!0;const i=()=>{this.isRunning&&(this.emit(\"tick\"),this.animationFrameId=requestAnimationFrame(i))};i()}stop(){this.isRunning=!1,null!==this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null)}destroy(){this.stop()}}const r=[\"audio/webm\",\"audio/wav\",\"audio/mpeg\",\"audio/mp4\",\"audio/mp3\"];class o extends e{constructor(i){var t,e,r,o,n,a;super(Object.assign(Object.assign({},i),{audioBitsPerSecond:null!==(t=i.audioBitsPerSecond)&&void 0!==t?t:128e3,scrollingWaveform:null!==(e=i.scrollingWaveform)&&void 0!==e&&e,scrollingWaveformWindow:null!==(r=i.scrollingWaveformWindow)&&void 0!==r?r:5,continuousWaveform:null!==(o=i.continuousWaveform)&&void 0!==o&&o,renderRecordedAudio:null===(n=i.renderRecordedAudio)||void 0===n||n,mediaRecorderTimeslice:null!==(a=i.mediaRecorderTimeslice)&&void 0!==a?a:void 0})),this.stream=null,this.mediaRecorder=null,this.dataWindow=null,this.isWaveformPaused=!1,this.lastStartTime=0,this.lastDuration=0,this.duration=0,this.micStream=null,this.recordedBlobUrl=null,this.timer=new s,this.subscriptions.push(this.timer.on(\"tick\",(()=>{const i=performance.now()-this.lastStartTime;this.duration=this.isPaused()?this.duration:this.lastDuration+i,this.emit(\"record-progress\",this.duration)})))}static create(i){return new o(i||{})}renderMicStream(i){var t;const e=new AudioContext,s=e.createMediaStreamSource(i),r=e.createAnalyser();s.connect(r),this.options.continuousWaveform&&(r.fftSize=32);const o=r.frequencyBinCount,n=new Float32Array(o);let a=0;this.wavesurfer&&(null!==(t=this.originalOptions)&&void 0!==t||(this.originalOptions=Object.assign({},this.wavesurfer.options)),this.wavesurfer.options.interact=!1,this.options.scrollingWaveform&&(this.wavesurfer.options.cursorWidth=0));const d=setInterval((()=>{var i,t,s,d;if(!this.isWaveformPaused){if(r.getFloatTimeDomainData(n),this.options.scrollingWaveform){const i=Math.floor((this.options.scrollingWaveformWindow||0)*e.sampleRate),t=Math.min(i,this.dataWindow?this.dataWindow.length+o:o),s=new Float32Array(i);if(this.dataWindow){const e=Math.max(0,i-this.dataWindow.length);s.set(this.dataWindow.slice(-t+o),e)}s.set(n,i-o),this.dataWindow=s}else if(this.options.continuousWaveform){if(!this.dataWindow){const e=this.options.continuousWaveformDuration?Math.round(100*this.options.continuousWaveformDuration):(null!==(t=null===(i=this.wavesurfer)||void 0===i?void 0:i.getWidth())&&void 0!==t?t:0)*window.devicePixelRatio;this.dataWindow=new Float32Array(e)}let e=0;for(let i=0;i<o;i++){const t=Math.abs(n[i]);t>e&&(e=t)}if(a+1>this.dataWindow.length){const i=new Float32Array(2*this.dataWindow.length);i.set(this.dataWindow,0),this.dataWindow=i}this.dataWindow[a]=e,a++}else this.dataWindow=n;if(this.wavesurfer){const i=(null!==(d=null===(s=this.dataWindow)||void 0===s?void 0:s.length)&&void 0!==d?d:0)/100;this.wavesurfer.load(\"\",[this.dataWindow],this.options.scrollingWaveform?this.options.scrollingWaveformWindow:i).then((()=>{this.wavesurfer&&this.options.continuousWaveform&&(this.wavesurfer.setTime(this.getDuration()/1e3),this.wavesurfer.options.minPxPerSec||this.wavesurfer.setOptions({minPxPerSec:this.wavesurfer.getWidth()/this.wavesurfer.getDuration()}))})).catch((i=>{console.error(\"Error rendering real-time recording data:\",i)}))}}}),10);return{onDestroy:()=>{clearInterval(d),null==s||s.disconnect(),null==e||e.close()},onEnd:()=>{this.isWaveformPaused=!0,this.stopMic()}}}startMic(t){return i(this,void 0,void 0,(function*(){let i;this.micStream&&this.stopMic();try{i=yield navigator.mediaDevices.getUserMedia({audio:null==t||t})}catch(i){throw new Error(\"Error accessing the microphone: \"+i.message)}const e=this.renderMicStream(i);return this.micStream=e,this.unsubscribeDestroy=this.once(\"destroy\",e.onDestroy),this.unsubscribeRecordEnd=this.once(\"record-end\",e.onEnd),this.stream=i,i}))}stopMic(){var i,t,e;null===(i=this.micStream)||void 0===i||i.onDestroy(),null===(t=this.unsubscribeDestroy)||void 0===t||t.call(this),null===(e=this.unsubscribeRecordEnd)||void 0===e||e.call(this),this.micStream=null,this.unsubscribeDestroy=void 0,this.unsubscribeRecordEnd=void 0,this.stream&&(this.stream.getTracks().forEach((i=>i.stop())),this.stream=null,this.mediaRecorder=null)}startRecording(t){return i(this,void 0,void 0,(function*(){const i=this.stream||(yield this.startMic(t));this.dataWindow=null;const e=this.mediaRecorder||new MediaRecorder(i,{mimeType:this.options.mimeType||r.find((i=>MediaRecorder.isTypeSupported(i))),audioBitsPerSecond:this.options.audioBitsPerSecond});this.mediaRecorder=e,this.stopRecording();const s=[];e.ondataavailable=i=>{i.data.size>0&&s.push(i.data),this.emit(\"record-data-available\",i.data)};const o=i=>{var t;const r=new Blob(s,{type:e.mimeType});this.emit(i,r),this.options.renderRecordedAudio&&(this.applyOriginalOptionsIfNeeded(),this.recordedBlobUrl&&URL.revokeObjectURL(this.recordedBlobUrl),this.recordedBlobUrl=URL.createObjectURL(r),null===(t=this.wavesurfer)||void 0===t||t.load(this.recordedBlobUrl))};e.onpause=()=>o(\"record-pause\"),e.onstop=()=>o(\"record-end\"),e.start(this.options.mediaRecorderTimeslice),this.lastStartTime=performance.now(),this.lastDuration=0,this.duration=0,this.isWaveformPaused=!1,this.timer.start(),this.emit(\"record-start\")}))}getDuration(){return this.duration}isRecording(){var i;return\"recording\"===(null===(i=this.mediaRecorder)||void 0===i?void 0:i.state)}isPaused(){var i;return\"paused\"===(null===(i=this.mediaRecorder)||void 0===i?void 0:i.state)}isActive(){var i;return\"inactive\"!==(null===(i=this.mediaRecorder)||void 0===i?void 0:i.state)}stopRecording(){var i;this.isActive()&&(null===(i=this.mediaRecorder)||void 0===i||i.stop(),this.timer.stop())}pauseRecording(){var i,t;this.isRecording()&&(this.isWaveformPaused=!0,null===(i=this.mediaRecorder)||void 0===i||i.requestData(),null===(t=this.mediaRecorder)||void 0===t||t.pause(),this.timer.stop(),this.lastDuration=this.duration)}resumeRecording(){var i;this.isPaused()&&(this.isWaveformPaused=!1,null===(i=this.mediaRecorder)||void 0===i||i.resume(),this.timer.start(),this.lastStartTime=performance.now(),this.emit(\"record-resume\"))}static getAvailableAudioDevices(){return i(this,void 0,void 0,(function*(){return navigator.mediaDevices.enumerateDevices().then((i=>i.filter((i=>\"audioinput\"===i.kind))))}))}destroy(){this.applyOriginalOptionsIfNeeded(),super.destroy(),this.stopRecording(),this.stopMic(),this.recordedBlobUrl&&(URL.revokeObjectURL(this.recordedBlobUrl),this.recordedBlobUrl=null)}applyOriginalOptionsIfNeeded(){this.wavesurfer&&this.originalOptions&&(this.wavesurfer.setOptions(this.originalOptions),delete this.originalOptions)}}export{o as default};\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2025)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useCallback, useContext } from \"react\"\n\nimport { LibContext } from \"~lib/components/core/LibContext\"\nimport createDownloadLinkElement from \"~lib/util/createDownloadLinkElement\"\n\nconst useDownloadUrl = (\n  url: string | null,\n  filename: string\n): (() => void) => {\n  const {\n    libConfig: {\n      enforceDownloadInNewTab = false, // Default to false, if no libConfig, e.g. for tests\n    },\n  } = useContext(LibContext)\n\n  const downloadUrl = useCallback(() => {\n    if (!url) return\n\n    const link = createDownloadLinkElement({\n      enforceDownloadInNewTab,\n      url,\n      filename,\n    })\n\n    link.style.display = \"none\"\n    document.body.appendChild(link)\n    link.click()\n    document.body.removeChild(link)\n  }, [url, enforceDownloadInNewTab, filename])\n\n  return downloadUrl\n}\n\nexport default useDownloadUrl\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2025)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useCallback, useEffect, useMemo, useState } from \"react\"\n\nimport { useFormClearHelper } from \"~lib/components/widgets/Form\"\nimport { isNullOrUndefined, notNullOrUndefined } from \"~lib/util/utils\"\nimport { WidgetStateManager } from \"~lib/WidgetStateManager\"\n\n/**\n * Think of useState, but the state is also persisted in the widget manager.\n * This allows you to have the state be persisted between mounting and unmounting of the component.\n * @param widgetMgr - The widget manager instance to use\n * @param id - The id of the widget to store the state for\n * @param key - The key of the state to store\n * @param defaultValue - The default value to use if the state is not set in the widget manager\n * @returns A tuple containing the current state and a function to set the state\n */\nconst useWidgetManagerElementState = <T,>({\n  widgetMgr,\n  id,\n  formId,\n  key,\n  defaultValue,\n}: {\n  widgetMgr: WidgetStateManager\n  id: string\n  formId?: string\n  key: string\n  defaultValue: T\n}): [T, (value: T) => void] => {\n  useEffect(() => {\n    const existingValue = widgetMgr.getElementState(id, key)\n    if (isNullOrUndefined(existingValue) && notNullOrUndefined(defaultValue)) {\n      widgetMgr.setElementState(id, key, defaultValue)\n    }\n  }, [widgetMgr, id, key, defaultValue])\n\n  const [state, setStateInternal] = useState<T>(\n    widgetMgr.getElementState(id, key) ?? defaultValue\n  )\n\n  const setState = useCallback(\n    (value: T) => {\n      widgetMgr.setElementState(id, key, value)\n      setStateInternal(value)\n    },\n    [widgetMgr, id, key]\n  )\n\n  const element = useMemo(() => ({ formId: formId || \"\" }), [formId])\n  const onFormCleared = useCallback(\n    () => setState(defaultValue),\n    [defaultValue, setState]\n  )\n\n  useFormClearHelper({\n    element,\n    widgetMgr,\n    onFormCleared,\n  })\n\n  return [state, setState]\n}\n\nexport default useWidgetManagerElementState\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2025)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport zip from \"lodash/zip\"\n\nimport {\n  FileUploaderState as FileUploaderStateProto,\n  IFileURLs,\n  UploadedFileInfo as UploadedFileInfoProto,\n} from \"@streamlit/protobuf\"\n\nimport { FileUploadClient } from \"~lib/FileUploadClient\"\nimport { ensureError } from \"~lib/util/ErrorHandling\"\nimport { WidgetInfo, WidgetStateManager } from \"~lib/WidgetStateManager\"\n\ntype SuccessfulUpload = {\n  fileUrl: IFileURLs\n  file: File\n}\n\ntype FailedUpload = {\n  file: File\n  error: Error\n}\n\nexport const uploadFiles = async ({\n  files,\n  uploadClient,\n  widgetMgr,\n  widgetInfo,\n  fragmentId,\n}: {\n  files: File[]\n  uploadClient: FileUploadClient\n  widgetMgr: WidgetStateManager\n  widgetInfo: WidgetInfo\n  fragmentId?: string\n}): Promise<{\n  successfulUploads: SuccessfulUpload[]\n  failedUploads: FailedUpload[]\n}> => {\n  let fileUrls: IFileURLs[] = []\n\n  try {\n    fileUrls = await uploadClient.fetchFileURLs(files)\n  } catch (e) {\n    return {\n      successfulUploads: [],\n      failedUploads: files.map(file => ({ file, error: ensureError(e) })),\n    }\n  }\n\n  const filesWithUrls = zip(files, fileUrls)\n\n  const successfulUploads: SuccessfulUpload[] = []\n  const failedUploads: FailedUpload[] = []\n\n  await Promise.all(\n    filesWithUrls.map(async ([file, fileUrl]) => {\n      if (!file || !fileUrl?.uploadUrl || !fileUrl.fileId) {\n        return { file, fileUrl, error: new Error(\"No upload URL found\") }\n      }\n\n      try {\n        await uploadClient.uploadFile(\n          { id: fileUrl.fileId, formId: widgetInfo.formId || \"\" }, // TODO SEE IF DOWNSTREAM LOGIC CAN BE SIMPLIFIED\n          fileUrl.uploadUrl,\n          file\n        )\n        successfulUploads.push({ fileUrl, file })\n      } catch (e) {\n        const error = ensureError(e)\n        failedUploads.push({ file, error })\n      }\n    })\n  )\n\n  widgetMgr.setFileUploaderStateValue(\n    widgetInfo,\n    new FileUploaderStateProto({\n      uploadedFileInfo: successfulUploads.map(\n        ({ file, fileUrl }) =>\n          new UploadedFileInfoProto({\n            fileId: fileUrl.fileId,\n            fileUrls: fileUrl,\n            name: file.webkitRelativePath || file.name,\n            size: file.size,\n          })\n      ),\n    }),\n    {\n      fromUi: true,\n    },\n    fragmentId\n  )\n\n  return { successfulUploads, failedUploads }\n}\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2025)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport styled from \"@emotion/styled\"\n\nexport const StyledAudioInputContainerDiv = styled.div()\n\nexport const StyledWaveformContainerDiv = styled.div<{ disabled?: boolean }>(\n  ({ theme, disabled }) => ({\n    height: theme.sizes.largestElementHeight,\n    width: \"100%\",\n    background: theme.colors.secondaryBg,\n    borderRadius: theme.radii.default,\n    marginBottom: theme.spacing.twoXS,\n    display: \"flex\",\n    alignItems: \"center\",\n    position: \"relative\",\n    paddingLeft: theme.spacing.xs,\n    paddingRight: theme.spacing.sm,\n    border: theme.colors.widgetBorderColor\n      ? `${theme.sizes.borderWidth} solid ${theme.colors.widgetBorderColor}`\n      : undefined,\n    cursor: disabled ? \"not-allowed\" : \"auto\",\n  })\n)\n\nexport const StyledWaveformInnerDiv = styled.div({\n  flex: 1,\n})\n\nexport const StyledWaveSurferDiv = styled.div<{ show: boolean }>(\n  ({ show }) => ({\n    display: show ? \"block\" : \"none\",\n  })\n)\n\nexport const StyledWaveformTimeCode = styled.span<{\n  isPlayingOrRecording: boolean\n  disabled?: boolean\n}>(({ theme, isPlayingOrRecording, disabled }) => ({\n  margin: theme.spacing.sm,\n  fontFamily: theme.fonts.monospace,\n  color: disabled\n    ? theme.colors.fadedText40\n    : isPlayingOrRecording\n      ? theme.colors.bodyText\n      : theme.colors.fadedText60,\n  backgroundColor: theme.colors.secondaryBg,\n  fontSize: theme.fontSizes.sm,\n}))\n\nexport const StyledErrorContainerDiv = styled.div({\n  width: \"100%\",\n  textAlign: \"center\",\n  overflow: \"hidden\",\n})\n\nexport const StyledErrorTextSpan = styled.span(({ theme }) => ({\n  color: theme.colors.bodyText,\n}))\n\nexport const StyledNoMicInputLearnMoreLink = styled.a(({ theme }) => ({\n  color: theme.colors.link,\n  textDecoration: theme.linkUnderline ? \"underline\" : \"none\",\n}))\n\n// Placeholder\nexport const StyledPlaceholderContainerDiv = styled.div(({ theme }) => ({\n  height: theme.sizes.largestElementHeight,\n  display: \"flex\",\n  justifyContent: \"center\",\n  alignItems: \"center\",\n}))\n\nexport const StyledPlaceholderDotsDiv = styled.div(({ theme }) => {\n  const dotSize = \"0.625em\"\n  return {\n    opacity: 0.2,\n    width: \"100%\",\n    height: dotSize,\n    backgroundSize: dotSize,\n    backgroundImage: `radial-gradient(${theme.colors.fadedText10} 40%, transparent 40%)`,\n    backgroundRepeat: \"repeat\",\n  }\n})\n\nexport const StyledActionButtonStopRecordingDiv = styled.span(({ theme }) => ({\n  \"& > button\": {\n    color: theme.colors.primary,\n    padding: theme.spacing.threeXS,\n  },\n  \"& > button:hover, & > button:focus\": {\n    color: theme.colors.redColor,\n  },\n}))\n\nexport const StyledActionButtonStartRecordingDiv = styled.span(\n  ({ theme }) => ({\n    \"& > button\": {\n      padding: theme.spacing.threeXS,\n      color: theme.colors.fadedText60,\n    },\n    \"& > button:hover, & > button:focus\": {\n      color: theme.colors.bodyText,\n    },\n  })\n)\n\nexport const StyledActionButtonPlayPauseDiv = styled.span(({ theme }) => ({\n  \"& > button\": {\n    padding: theme.spacing.threeXS,\n    color: theme.colors.fadedText60,\n  },\n  \"& > button:hover, & > button:focus\": {\n    color: theme.colors.bodyText,\n  },\n}))\n\nexport const StyledActionButtonContainerDiv = styled.div(({ theme }) => ({\n  display: \"flex\",\n  justifyContent: \"center\",\n  alignItems: \"center\",\n  flexGrow: 0,\n  flexShrink: 1,\n  padding: theme.spacing.xs,\n  gap: theme.spacing.twoXS,\n  marginRight: theme.spacing.twoXS,\n}))\n\nexport const StyledWidgetLabelHelp = styled.div(({ theme }) => ({\n  marginLeft: theme.spacing.sm,\n}))\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2025)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { memo } from \"react\"\n\nimport { EmotionIcon } from \"@emotion-icons/emotion-icon\"\nimport { Mic } from \"@emotion-icons/material-outlined\"\nimport {\n  Pause,\n  PlayArrow,\n  Refresh,\n  StopCircle,\n} from \"@emotion-icons/material-rounded\"\n\nimport BaseButton, { BaseButtonKind } from \"~lib/components/shared/BaseButton\"\nimport Icon, { StyledSpinnerIcon } from \"~lib/components/shared/Icon\"\n\nimport {\n  StyledActionButtonContainerDiv,\n  StyledActionButtonPlayPauseDiv,\n  StyledActionButtonStartRecordingDiv,\n  StyledActionButtonStopRecordingDiv,\n} from \"./styled-components\"\n\ninterface BaseActionButtonProps {\n  onClick: () => void\n  disabled: boolean\n  ariaLabel: string\n  iconContent: EmotionIcon\n}\n\nconst ActionButton: React.FC<BaseActionButtonProps> = ({\n  onClick,\n  disabled,\n  ariaLabel,\n  iconContent,\n}) => (\n  <BaseButton\n    kind={BaseButtonKind.BORDERLESS_ICON}\n    onClick={onClick}\n    disabled={disabled}\n    aria-label={ariaLabel}\n    containerWidth\n    data-testid=\"stAudioInputActionButton\"\n  >\n    <Icon content={iconContent} size=\"lg\" color=\"inherit\" />\n  </BaseButton>\n)\n\nexport interface AudioInputActionButtonProps {\n  disabled: boolean\n  isRecording: boolean\n  isPlaying: boolean\n  isUploading: boolean\n  isError: boolean\n  recordingUrlExists: boolean\n  startRecording(): void\n  stopRecording(): void\n  onClickPlayPause(): void\n  onClear(): void\n}\n\ninterface AudioInputStopRecordingButtonProps {\n  disabled: boolean\n  stopRecording(): void\n}\n\ninterface AudioInputPlayPauseButtonProps {\n  disabled: boolean\n  isPlaying: boolean\n  onClickPlayPause(): void\n}\n\ninterface AudioInputStartRecordingButtonProps {\n  disabled: boolean\n  startRecording(): void\n}\n\ninterface AudioInputResetButtonProps {\n  onClick(): void\n}\n\nexport const AudioInputStopRecordingButton: React.FC<\n  AudioInputStopRecordingButtonProps\n> = ({ disabled, stopRecording }) => (\n  <StyledActionButtonStopRecordingDiv>\n    <ActionButton\n      onClick={stopRecording}\n      disabled={disabled}\n      ariaLabel=\"Stop recording\"\n      iconContent={StopCircle}\n    />\n  </StyledActionButtonStopRecordingDiv>\n)\n\nexport const AudioInputPlayPauseButton: React.FC<\n  AudioInputPlayPauseButtonProps\n> = ({ disabled, isPlaying, onClickPlayPause }) => {\n  return (\n    <StyledActionButtonPlayPauseDiv>\n      {isPlaying ? (\n        <ActionButton\n          onClick={onClickPlayPause}\n          disabled={disabled}\n          ariaLabel=\"Pause\"\n          iconContent={Pause}\n        />\n      ) : (\n        <ActionButton\n          onClick={onClickPlayPause}\n          disabled={disabled}\n          ariaLabel=\"Play\"\n          iconContent={PlayArrow}\n        />\n      )}\n    </StyledActionButtonPlayPauseDiv>\n  )\n}\n\nexport const AudioInputStartRecordingButton: React.FC<\n  AudioInputStartRecordingButtonProps\n> = ({ disabled, startRecording }) => (\n  <StyledActionButtonStartRecordingDiv>\n    <ActionButton\n      onClick={startRecording}\n      disabled={disabled}\n      ariaLabel=\"Record\"\n      iconContent={Mic}\n    />\n  </StyledActionButtonStartRecordingDiv>\n)\n\nexport const AudioInputResetButton: React.FC<AudioInputResetButtonProps> = ({\n  onClick,\n}) => (\n  <StyledActionButtonPlayPauseDiv>\n    <ActionButton\n      disabled={false}\n      onClick={onClick}\n      ariaLabel=\"Reset\"\n      iconContent={Refresh}\n    />\n  </StyledActionButtonPlayPauseDiv>\n)\n\nconst AudioInputActionButtons: React.FC<AudioInputActionButtonProps> = ({\n  disabled,\n  isRecording,\n  isPlaying,\n  isUploading,\n  isError,\n  recordingUrlExists,\n  startRecording,\n  stopRecording,\n  onClickPlayPause,\n  onClear,\n}) => {\n  if (isError) {\n    return (\n      <StyledActionButtonContainerDiv>\n        <AudioInputResetButton onClick={onClear} />\n      </StyledActionButtonContainerDiv>\n    )\n  }\n\n  if (isUploading) {\n    return (\n      <StyledActionButtonContainerDiv>\n        <StyledSpinnerIcon\n          aria-label=\"Uploading\"\n          size=\"base\"\n          margin=\"0\"\n          padding=\"0\"\n        />\n      </StyledActionButtonContainerDiv>\n    )\n  }\n\n  return (\n    <StyledActionButtonContainerDiv>\n      {isRecording ? (\n        <AudioInputStopRecordingButton\n          disabled={disabled}\n          stopRecording={stopRecording}\n        />\n      ) : (\n        <AudioInputStartRecordingButton\n          disabled={disabled}\n          startRecording={startRecording}\n        />\n      )}\n      {recordingUrlExists && (\n        <AudioInputPlayPauseButton\n          disabled={disabled}\n          isPlaying={isPlaying}\n          onClickPlayPause={onClickPlayPause}\n        />\n      )}\n    </StyledActionButtonContainerDiv>\n  )\n}\n\nexport default memo(AudioInputActionButtons)\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2025)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { memo, ReactElement } from \"react\"\n\nimport {\n  StyledErrorContainerDiv,\n  StyledErrorTextSpan,\n} from \"./styled-components\"\n\nconst AudioInputErrorState = (): ReactElement => {\n  return (\n    <StyledErrorContainerDiv>\n      <StyledErrorTextSpan>\n        An error has occurred, please try again.\n      </StyledErrorTextSpan>\n    </StyledErrorContainerDiv>\n  )\n}\n\nexport default memo(AudioInputErrorState)\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2025)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const WAVEFORM_PADDING = 4\nexport const BAR_WIDTH = 4\nexport const BAR_GAP = 4\nexport const BAR_RADIUS = 8\nexport const CURSOR_WIDTH = 0\n\nexport const STARTING_TIME_STRING = \"00:00\"\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2025)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// code in this file was adapted from recorder.js library\n\nimport { getLogger } from \"loglevel\"\n\nconst LOG = getLogger(\"convertAudioToWav\")\n\n/**\n * Converts an audio blob to WAV format with high-quality resampling.\n * Uses the Web Audio API's OfflineAudioContext for professional-quality\n * resampling with proper anti-aliasing filters instead of linear interpolation.\n *\n * @param fileBlob - The input audio blob to convert\n * @param targetSampleRate - Optional target sample rate for the output WAV file\n * @returns A Promise resolving to the WAV file as a Blob, or undefined on error\n */\nasync function convertFileToWav(\n  fileBlob: Blob,\n  targetSampleRate?: number\n): Promise<Blob | undefined> {\n  if (!fileBlob || fileBlob.size === 0) {\n    LOG.error(\"Invalid or empty blob provided\")\n    return undefined\n  }\n\n  if (!window.AudioContext) {\n    LOG.error(\"AudioContext not supported in this browser\")\n    return undefined\n  }\n\n  const audioContext = new AudioContext()\n\n  let arrayBuffer: ArrayBuffer\n  try {\n    arrayBuffer = await fileBlob.arrayBuffer()\n  } catch (error) {\n    LOG.error(\"Failed to read blob as ArrayBuffer\", error)\n    void audioContext.close()\n    return undefined\n  }\n\n  let audioBuffer: AudioBuffer\n  try {\n    audioBuffer = await audioContext.decodeAudioData(arrayBuffer)\n  } catch (error) {\n    LOG.error(\"Failed to decode audio data\", error)\n    void audioContext.close()\n    return undefined\n  } finally {\n    void audioContext.close()\n  }\n\n  const outputSampleRate = targetSampleRate || audioBuffer.sampleRate\n\n  if (outputSampleRate === audioBuffer.sampleRate) {\n    LOG.debug(\n      `No resampling needed, sample rate is already ${outputSampleRate}Hz`\n    )\n    return encodeWAV(audioBuffer, outputSampleRate)\n  }\n\n  LOG.debug(\n    `Resampling from ${audioBuffer.sampleRate}Hz to ${outputSampleRate}Hz`\n  )\n\n  const { duration, numberOfChannels } = audioBuffer\n  const frameCount = Math.ceil(duration * outputSampleRate)\n\n  if (!window.OfflineAudioContext) {\n    LOG.error(\n      \"OfflineAudioContext not supported, falling back to no resampling\"\n    )\n    return encodeWAV(audioBuffer, audioBuffer.sampleRate)\n  }\n\n  const offlineContext = new OfflineAudioContext(\n    numberOfChannels,\n    frameCount,\n    outputSampleRate\n  )\n\n  const source = offlineContext.createBufferSource()\n  source.buffer = audioBuffer\n  source.connect(offlineContext.destination)\n  source.start(0)\n\n  try {\n    const resampledBuffer = await offlineContext.startRendering()\n    return encodeWAV(resampledBuffer, outputSampleRate)\n  } catch (error) {\n    LOG.error(\"Failed to resample audio using OfflineAudioContext\", error)\n    return encodeWAV(audioBuffer, audioBuffer.sampleRate)\n  }\n}\n\n/**\n * Encodes an AudioBuffer as a WAV file blob.\n * Separated from the main function for better modularity and testability.\n *\n * @param audioBuffer - The AudioBuffer containing the audio data to encode.\n *   - Each channel in the buffer will be interleaved in the output WAV file.\n *   - The buffer should contain PCM float samples in the range [-1, 1].\n * @param sampleRate - The sample rate (in Hz) to use for the WAV file header.\n *   - This determines the playback rate of the resulting WAV file.\n * @returns A Blob containing a WAV file encoded according to the RIFF/WAVE specification:\n *   - 44-byte header (RIFF, WAVE, fmt, data chunks)\n *   - 16-bit PCM samples, interleaved for multiple channels\n *   - Audio data starts at byte 44\n *   - MIME type is \"audio/wav\"\n */\nfunction encodeWAV(audioBuffer: AudioBuffer, sampleRate: number): Blob {\n  const HEADER_SIZE = 44\n  const numOfChan = audioBuffer.numberOfChannels\n  const length = audioBuffer.length * numOfChan * 2 + HEADER_SIZE\n  const buffer = new ArrayBuffer(length)\n  const view = new DataView(buffer)\n\n  /**\n   * Helper function to write a string to the DataView\n   */\n  const writeString = (offset: number, string: string): void => {\n    for (let i = 0; i < string.length; i++) {\n      view.setUint8(offset + i, string.charCodeAt(i))\n    }\n  }\n\n  // Write RIFF chunk descriptor\n  writeString(0, \"RIFF\")\n  view.setUint32(4, length - 8, true) // File size minus RIFF header\n  writeString(8, \"WAVE\")\n\n  // Write fmt sub-chunk\n  writeString(12, \"fmt \")\n  view.setUint32(16, 16, true) // SubChunk1Size (16 for PCM)\n  view.setUint16(20, 1, true) // AudioFormat (1 for PCM)\n  view.setUint16(22, numOfChan, true) // NumChannels\n  view.setUint32(24, sampleRate, true) // SampleRate\n  view.setUint32(28, sampleRate * numOfChan * 2, true) // ByteRate\n  view.setUint16(32, numOfChan * 2, true) // BlockAlign\n  view.setUint16(34, 16, true) // BitsPerSample\n\n  // Write data sub-chunk\n  writeString(36, \"data\")\n  view.setUint32(40, length - HEADER_SIZE, true) // SubChunk2Size\n\n  // Write interleaved PCM samples\n  let offset = HEADER_SIZE\n  for (let i = 0; i < audioBuffer.length; i++) {\n    for (let channel = 0; channel < numOfChan; channel++) {\n      const sample = Math.max(\n        -1,\n        Math.min(1, audioBuffer.getChannelData(channel)[i])\n      )\n      view.setInt16(offset, sample * 0x7fff, true)\n      offset += 2\n    }\n  }\n\n  return new Blob([buffer], { type: \"audio/wav\" })\n}\n\nexport default convertFileToWav\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2025)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst formatTime = (timeMs: number): string => {\n  const seconds = Math.floor(timeMs / 1000)\n  const minutes = Math.floor(seconds / 60)\n  const hours = Math.floor(minutes / 60)\n  const remainingSeconds = seconds % 60\n  const remainingMinutes = minutes % 60\n\n  const displaySec = remainingSeconds.toString().padStart(2, \"0\")\n  const displayMin = remainingMinutes.toString().padStart(2, \"0\")\n  const displayHours = hours.toString().padStart(2, \"0\")\n\n  return minutes < 60\n    ? `${displayMin}:${displaySec}`\n    : `${displayHours}:${displayMin}:${displaySec}`\n}\n\nexport default formatTime\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2025)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { memo, ReactElement } from \"react\"\n\nimport { ENABLE_PERIPHERALS_DOCS_URL } from \"~lib/urls\"\n\nimport {\n  StyledErrorContainerDiv,\n  StyledErrorTextSpan,\n  StyledNoMicInputLearnMoreLink,\n} from \"./styled-components\"\n\nconst NoMicPermissions = (): ReactElement => {\n  return (\n    <StyledErrorContainerDiv>\n      <StyledErrorTextSpan>\n        This app would like to use your microphone.\n      </StyledErrorTextSpan>{\" \"}\n      <StyledNoMicInputLearnMoreLink\n        href={ENABLE_PERIPHERALS_DOCS_URL}\n        rel=\"noopener noreferrer\"\n        target=\"_blank\"\n      >\n        Learn how to allow access.\n      </StyledNoMicInputLearnMoreLink>\n    </StyledErrorContainerDiv>\n  )\n}\n\nexport default memo(NoMicPermissions)\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2025)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { memo, ReactElement } from \"react\"\n\nimport {\n  StyledPlaceholderContainerDiv,\n  StyledPlaceholderDotsDiv,\n} from \"./styled-components\"\n\nconst Placeholder = (): ReactElement => {\n  return (\n    <StyledPlaceholderContainerDiv>\n      <StyledPlaceholderDotsDiv />\n    </StyledPlaceholderContainerDiv>\n  )\n}\n\nexport default memo(Placeholder)\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2025)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, {\n  memo,\n  ReactElement,\n  useCallback,\n  useEffect,\n  useRef,\n  useState,\n} from \"react\"\n\nimport { Delete, FileDownload } from \"@emotion-icons/material-outlined\"\nimport isEqual from \"lodash/isEqual\"\nimport WaveSurfer from \"wavesurfer.js\"\nimport RecordPlugin from \"wavesurfer.js/dist/plugins/record\"\n\nimport { AudioInput as AudioInputProto } from \"@streamlit/protobuf\"\n\nimport Toolbar, { ToolbarAction } from \"~lib/components/shared/Toolbar\"\nimport { Placement } from \"~lib/components/shared/Tooltip\"\nimport TooltipIcon from \"~lib/components/shared/TooltipIcon\"\nimport { WidgetLabel } from \"~lib/components/widgets/BaseWidget\"\nimport { FormClearHelper } from \"~lib/components/widgets/Form\"\nimport { FileUploadClient } from \"~lib/FileUploadClient\"\nimport useDownloadUrl from \"~lib/hooks/useDownloadUrl\"\nimport { useEmotionTheme } from \"~lib/hooks/useEmotionTheme\"\nimport useWidgetManagerElementState from \"~lib/hooks/useWidgetManagerElementState\"\nimport { blend, convertRemToPx } from \"~lib/theme/utils\"\nimport { usePrevious } from \"~lib/util/Hooks\"\nimport { uploadFiles } from \"~lib/util/uploadFiles\"\nimport {\n  isNullOrUndefined,\n  labelVisibilityProtoValueToEnum,\n  notNullOrUndefined,\n} from \"~lib/util/utils\"\nimport { WidgetStateManager } from \"~lib/WidgetStateManager\"\n\nimport AudioInputActionButtons from \"./AudioInputActionButtons\"\nimport AudioInputErrorState from \"./AudioInputErrorState\"\nimport {\n  BAR_GAP,\n  BAR_RADIUS,\n  BAR_WIDTH,\n  CURSOR_WIDTH,\n  STARTING_TIME_STRING,\n  WAVEFORM_PADDING,\n} from \"./constants\"\nimport convertAudioToWav from \"./convertAudioToWav\"\nimport formatTime from \"./formatTime\"\nimport NoMicPermissions from \"./NoMicPermissions\"\nimport Placeholder from \"./Placeholder\"\nimport {\n  StyledAudioInputContainerDiv,\n  StyledWaveformContainerDiv,\n  StyledWaveformInnerDiv,\n  StyledWaveformTimeCode,\n  StyledWaveSurferDiv,\n  StyledWidgetLabelHelp,\n} from \"./styled-components\"\nexport interface Props {\n  element: AudioInputProto\n  uploadClient: FileUploadClient\n  widgetMgr: WidgetStateManager\n  fragmentId?: string\n  disabled: boolean\n}\n\nconst AudioInput: React.FC<Props> = ({\n  element,\n  uploadClient,\n  widgetMgr,\n  fragmentId,\n  disabled,\n}): ReactElement => {\n  const theme = useEmotionTheme()\n  const previousTheme = usePrevious(theme)\n  const [wavesurfer, setWavesurfer] = useState<WaveSurfer | null>(null)\n  const waveSurferRef = useRef<HTMLDivElement | null>(null)\n  // Track current blob URL for cleanup\n  const currentBlobUrlRef = useRef<string | null>(null)\n  const [deleteFileUrl, setDeleteFileUrl] = useWidgetManagerElementState<\n    string | null\n  >({\n    widgetMgr,\n    id: element.id,\n    key: \"deleteFileUrl\",\n    defaultValue: null,\n  })\n\n  const [recordingUrl, setRecordingUrl] = useWidgetManagerElementState<\n    string | null\n  >({\n    widgetMgr,\n    id: element.id,\n    key: \"recordingUrl\",\n    defaultValue: null,\n  })\n\n  const [, setRerender] = useState(0)\n  const forceRerender = useCallback((): void => {\n    setRerender(prev => prev + 1)\n  }, [])\n  const [progressTime, setProgressTime] = useState(STARTING_TIME_STRING)\n\n  const [recordingTime, setRecordingTime] =\n    useWidgetManagerElementState<string>({\n      widgetMgr,\n      id: element.id,\n      formId: element.formId,\n      key: \"recordingTime\",\n      defaultValue: STARTING_TIME_STRING,\n    })\n\n  const [shouldUpdatePlaybackTime, setShouldUpdatePlaybackTime] =\n    useState(false)\n  const [hasNoMicPermissions, setHasNoMicPermissions] = useState(false)\n  const [hasRequestedMicPermissions, setHasRequestedMicPermissions] =\n    useState(false)\n  const [isUploading, setIsUploading] = useState(false)\n  const [isError, setIsError] = useState(false)\n\n  const widgetId = element.id\n  const widgetFormId = element.formId\n\n  const targetSampleRate = element.sampleRate || null\n\n  const recordPluginRef = useRef<RecordPlugin | null>(null)\n  const recordPluginHandlersRef = useRef<{\n    handleRecordProgress?: (time: number) => void\n  }>({})\n\n  const transcodeAndUploadFile = useCallback(\n    async (blob: Blob) => {\n      try {\n        setIsUploading(true)\n        if (notNullOrUndefined(widgetFormId))\n          widgetMgr.setFormsWithUploadsInProgress(new Set([widgetFormId]))\n\n        let wavBlob: Blob | undefined = undefined\n\n        if (blob.type === \"audio/wav\") {\n          wavBlob = blob\n        } else {\n          wavBlob = await convertAudioToWav(\n            blob,\n            targetSampleRate || undefined\n          )\n        }\n\n        if (!wavBlob) {\n          setIsError(true)\n          setIsUploading(false)\n          if (notNullOrUndefined(widgetFormId))\n            widgetMgr.setFormsWithUploadsInProgress(new Set())\n          return\n        }\n\n        let blobUrl: string\n        try {\n          blobUrl = URL.createObjectURL(wavBlob)\n          // Track the new blob URL and revoke the old one if it exists\n          if (\n            currentBlobUrlRef.current &&\n            currentBlobUrlRef.current !== blobUrl\n          ) {\n            URL.revokeObjectURL(currentBlobUrlRef.current)\n          }\n          currentBlobUrlRef.current = blobUrl\n        } catch {\n          setIsError(true)\n          setIsUploading(false)\n          if (notNullOrUndefined(widgetFormId))\n            widgetMgr.setFormsWithUploadsInProgress(new Set())\n          return\n        }\n\n        setRecordingUrl(blobUrl)\n\n        if (wavesurfer) {\n          void wavesurfer.load(blobUrl)\n          wavesurfer.setOptions({\n            interact: true,\n            waveColor: blend(\n              theme.colors.fadedText40,\n              theme.colors.secondaryBg\n            ),\n            progressColor: theme.colors.bodyText,\n          })\n        }\n\n        const timestamp = new Date()\n          .toISOString()\n          .slice(0, 16)\n          .replace(/:/g, \"-\")\n        const file = new File([wavBlob], `${timestamp}_audio.wav`, {\n          type: wavBlob.type,\n        })\n\n        try {\n          const { successfulUploads, failedUploads } = await uploadFiles({\n            files: [file],\n            uploadClient,\n            widgetMgr,\n            widgetInfo: { id: widgetId, formId: widgetFormId },\n            fragmentId,\n          })\n\n          if (failedUploads.length > 0) {\n            setIsError(true)\n            return\n          }\n\n          setIsError(false)\n          const upload = successfulUploads[0]\n          if (upload?.fileUrl?.deleteUrl) {\n            setDeleteFileUrl(upload.fileUrl.deleteUrl)\n          }\n        } catch {\n          setIsError(true)\n        } finally {\n          if (notNullOrUndefined(widgetFormId))\n            widgetMgr.setFormsWithUploadsInProgress(new Set())\n          setIsUploading(false)\n        }\n      } catch {\n        setIsError(true)\n        setIsUploading(false)\n        if (notNullOrUndefined(widgetFormId))\n          widgetMgr.setFormsWithUploadsInProgress(new Set())\n      }\n    },\n    [\n      uploadClient,\n      widgetMgr,\n      wavesurfer,\n      widgetId,\n      widgetFormId,\n      fragmentId,\n      setDeleteFileUrl,\n      targetSampleRate,\n      setRecordingUrl,\n      theme.colors.fadedText40,\n      theme.colors.secondaryBg,\n      theme.colors.bodyText,\n    ]\n  )\n\n  const handleClear = useCallback(\n    async ({\n      updateWidgetManager,\n      deleteFile,\n    }: {\n      updateWidgetManager: boolean\n      deleteFile: boolean\n    }): Promise<void> => {\n      if (isNullOrUndefined(wavesurfer)) {\n        return\n      }\n\n      const urlToRevoke = recordingUrl\n\n      // Clean up the blob URL when clearing\n      if (urlToRevoke && currentBlobUrlRef.current === urlToRevoke) {\n        URL.revokeObjectURL(urlToRevoke)\n        currentBlobUrlRef.current = null\n      }\n\n      setRecordingUrl(null)\n      setDeleteFileUrl(null)\n      setProgressTime(STARTING_TIME_STRING)\n      setRecordingTime(STARTING_TIME_STRING)\n      setShouldUpdatePlaybackTime(false)\n\n      wavesurfer.empty()\n\n      if (updateWidgetManager) {\n        widgetMgr.setFileUploaderStateValue(\n          element,\n          {},\n          { fromUi: true },\n          fragmentId\n        )\n      }\n\n      if (deleteFile && deleteFileUrl) {\n        try {\n          await uploadClient.deleteFile(deleteFileUrl)\n        } catch {\n          // Silently handle deletion errors\n        }\n      }\n\n      if (notNullOrUndefined(urlToRevoke)) {\n        URL.revokeObjectURL(urlToRevoke)\n      }\n    },\n    [\n      deleteFileUrl,\n      recordingUrl,\n      uploadClient,\n      wavesurfer,\n      element,\n      widgetMgr,\n      fragmentId,\n      setRecordingTime,\n      setDeleteFileUrl,\n      setRecordingUrl,\n    ]\n  )\n\n  useEffect(() => {\n    if (isNullOrUndefined(widgetFormId)) return\n\n    const formClearHelper = new FormClearHelper()\n    formClearHelper.manageFormClearListener(widgetMgr, widgetFormId, () => {\n      void handleClear({ updateWidgetManager: true, deleteFile: false })\n    })\n\n    return () => formClearHelper.disconnect()\n  }, [widgetFormId, handleClear, widgetMgr])\n\n  const initializeWaveSurfer = useCallback(() => {\n    if (waveSurferRef.current === null) return\n\n    const ws = WaveSurfer.create({\n      container: waveSurferRef.current,\n      waveColor: recordingUrl\n        ? blend(theme.colors.fadedText40, theme.colors.secondaryBg)\n        : theme.colors.primary,\n      progressColor: theme.colors.bodyText,\n      height:\n        convertRemToPx(theme.sizes.largestElementHeight) -\n        2 * WAVEFORM_PADDING,\n      barWidth: BAR_WIDTH,\n      barGap: BAR_GAP,\n      barRadius: BAR_RADIUS,\n      cursorWidth: CURSOR_WIDTH,\n      interact: true,\n    })\n\n    // Store event handlers for cleanup\n    const handleTimeUpdate = (time: number): void => {\n      setProgressTime(formatTime(time * 1000)) // get from seconds to milliseconds\n    }\n\n    const handlePause = (): void => {\n      forceRerender()\n    }\n\n    ws.on(\"timeupdate\", handleTimeUpdate)\n    ws.on(\"pause\", handlePause)\n\n    setWavesurfer(ws)\n\n    if (recordingUrl) {\n      void ws.load(recordingUrl)\n      ws.setOptions({\n        interact: true,\n      })\n    }\n\n    const recordOptions: Record<string, unknown> = {\n      renderRecordedAudio: false,\n      scrollingWaveform: false,\n      mimeType: \"audio/webm\",\n    }\n\n    try {\n      const record = ws.registerPlugin(RecordPlugin.create(recordOptions))\n      recordPluginRef.current = record\n\n      const handleRecordProgress = (time: number): void => {\n        setRecordingTime(formatTime(time))\n      }\n\n      record.on(\"record-progress\", handleRecordProgress)\n\n      recordPluginHandlersRef.current = {\n        handleRecordProgress,\n      }\n    } catch (err) {\n      if (\n        err instanceof Error &&\n        (err.name === \"NotAllowedError\" ||\n          err.name === \"PermissionDeniedError\")\n      ) {\n        setHasNoMicPermissions(true)\n      }\n    }\n\n    return () => {\n      if (recordPluginRef.current) {\n        if (recordPluginRef.current.isRecording()) {\n          recordPluginRef.current.stopRecording()\n        }\n        const handlers = recordPluginHandlersRef.current\n        if (handlers.handleRecordProgress) {\n          recordPluginRef.current.un(\n            \"record-progress\",\n            handlers.handleRecordProgress\n          )\n        }\n        recordPluginRef.current.destroy()\n        recordPluginRef.current = null\n        recordPluginHandlersRef.current = {}\n      }\n      if (ws) {\n        // Remove WaveSurfer event listeners before destroying\n        ws.un(\"timeupdate\", handleTimeUpdate)\n        ws.un(\"pause\", handlePause)\n        ws.destroy()\n      }\n    }\n  }, [\n    theme,\n    setProgressTime,\n    forceRerender,\n    recordingUrl,\n    setRecordingTime,\n    setHasNoMicPermissions,\n  ])\n\n  useEffect(() => {\n    const cleanup = initializeWaveSurfer()\n    return cleanup\n  }, [initializeWaveSurfer])\n\n  // Note: We don't revoke blob URLs on unmount because they need to persist\n  // across component remounts. They'll be cleaned up when:\n  // 1. User records a new audio (old one is revoked)\n  // 2. User explicitly clears the recording\n  // 3. Page unloads (browser handles this)\n\n  useEffect(() => {\n    if (!isEqual(previousTheme, theme)) {\n      wavesurfer?.setOptions({\n        waveColor: recordingUrl\n          ? blend(theme.colors.fadedText40, theme.colors.secondaryBg)\n          : theme.colors.primary,\n        progressColor: theme.colors.bodyText,\n        interact: true,\n      })\n    }\n  }, [theme, previousTheme, recordingUrl, wavesurfer])\n\n  const onClickPlayPause = useCallback(() => {\n    if (!wavesurfer) return\n\n    const handlePlayPause = async (): Promise<void> => {\n      try {\n        await wavesurfer.playPause()\n      } catch {\n        setIsError(true)\n      }\n      // This is because we want the time to be the duration of the audio when they stop recording,\n      // but once they start playing it, we want it to be the current time. So, once they start playing it\n      // we'll start keeping track of the playback time from that point onwards (until re-recording).\n      setShouldUpdatePlaybackTime(true)\n      // despite the state change above, this is still needed to force a rerender and make the time styling work\n      forceRerender()\n    }\n\n    void handlePlayPause()\n  }, [wavesurfer, forceRerender])\n\n  const startRecording = useCallback(async () => {\n    if (!hasRequestedMicPermissions) {\n      setHasRequestedMicPermissions(true)\n\n      let stream: MediaStream | null = null\n      try {\n        stream = await navigator.mediaDevices.getUserMedia({\n          audio: true,\n        })\n      } catch {\n        setHasNoMicPermissions(true)\n        return\n      } finally {\n        // Always stop tracks if we got a stream, even if an error occurred\n        if (stream) {\n          stream.getTracks().forEach(track => track.stop())\n        }\n      }\n    }\n\n    if (recordingUrl) {\n      await handleClear({ updateWidgetManager: false, deleteFile: true })\n    }\n\n    if (recordPluginRef.current && wavesurfer) {\n      wavesurfer.setOptions({\n        waveColor: theme.colors.primary,\n      })\n\n      const audioConstraints: MediaTrackConstraints = targetSampleRate\n        ? {\n            sampleRate: { ideal: targetSampleRate },\n          }\n        : {} // Default constraints\n\n      try {\n        await recordPluginRef.current.startRecording(audioConstraints)\n        setRecordingTime(formatTime(0))\n        forceRerender()\n      } catch (err) {\n        if (\n          err instanceof Error &&\n          (err.name === \"NotAllowedError\" ||\n            err.name === \"PermissionDeniedError\")\n        ) {\n          setHasNoMicPermissions(true)\n        } else {\n          setIsError(true)\n        }\n      }\n    } else if (!hasNoMicPermissions) {\n      setIsError(true)\n    }\n  }, [\n    hasRequestedMicPermissions,\n    setRecordingTime,\n    hasNoMicPermissions,\n    targetSampleRate,\n    wavesurfer,\n    theme.colors.primary,\n    forceRerender,\n    recordingUrl,\n    handleClear,\n  ])\n\n  const waitForRecordEnd = useCallback(\n    (plugin: RecordPlugin): Promise<Blob> => {\n      return new Promise<Blob>((resolve, reject) => {\n        const handleRecordEnd = (blob: Blob): void => {\n          plugin.un(\"record-end\", handleRecordEnd)\n\n          if (blob && blob instanceof Blob && blob.size > 0) {\n            resolve(blob)\n          } else {\n            reject(new Error(\"Invalid or empty recording blob\"))\n          }\n        }\n\n        plugin.on(\"record-end\", handleRecordEnd)\n\n        plugin.stopRecording()\n      })\n    },\n    []\n  )\n\n  const stopRecording = useCallback(async () => {\n    const recordPlugin = recordPluginRef.current\n    if (!recordPlugin?.isRecording()) {\n      return\n    }\n\n    try {\n      const blob = await waitForRecordEnd(recordPlugin)\n      await transcodeAndUploadFile(blob)\n\n      if (wavesurfer) {\n        // We are blending this color instead of directly using the theme color (fadedText40)\n        // because the \"faded\" part of fadedText40 means introducing some transparency, which\n        // causes problems with the progress waveform color because wavesurfer is choosing to\n        // tint the waveColor with the progressColor instead of directly setting the progressColor.\n        // This means that the low opacity of fadedText40 causes the progress waveform to\n        // have the same opacity which makes it impossible to darken it enough to match designs.\n        // We fix this by blending the colors to figure out what the resulting color should be at\n        // full opacity, and we use that color to set the waveColor.\n        wavesurfer.setOptions({\n          waveColor: blend(theme.colors.fadedText40, theme.colors.secondaryBg),\n          progressColor: theme.colors.bodyText,\n        })\n      }\n    } catch {\n      setIsError(true)\n    }\n  }, [transcodeAndUploadFile, wavesurfer, theme, waitForRecordEnd])\n\n  const downloadRecording = useDownloadUrl(recordingUrl, \"recording.wav\")\n\n  const isRecording = recordPluginRef.current?.isRecording() || false\n  const isPlaying = Boolean(wavesurfer?.isPlaying())\n\n  const isPlayingOrRecording = isRecording || isPlaying\n\n  const showPlaceholder = !isRecording && !recordingUrl && !hasNoMicPermissions\n\n  const showNoMicPermissionsOrPlaceholderOrError =\n    hasNoMicPermissions || showPlaceholder || isError\n\n  const handleStartRecording = useCallback(() => {\n    void startRecording()\n  }, [startRecording])\n\n  const handleStopRecording = useCallback(() => {\n    void stopRecording()\n  }, [stopRecording])\n\n  const handleClearWithError = useCallback(() => {\n    void handleClear({ updateWidgetManager: false, deleteFile: true })\n    setIsError(false)\n  }, [handleClear])\n\n  const handleDownloadClick = useCallback(() => {\n    downloadRecording()\n  }, [downloadRecording])\n\n  const handleDeleteClick = useCallback(() => {\n    void handleClear({\n      updateWidgetManager: true,\n      deleteFile: true,\n    })\n  }, [handleClear])\n\n  return (\n    <StyledAudioInputContainerDiv\n      className=\"stAudioInput\"\n      data-testid=\"stAudioInput\"\n    >\n      <WidgetLabel\n        label={element.label}\n        disabled={disabled}\n        labelVisibility={labelVisibilityProtoValueToEnum(\n          element.labelVisibility?.value\n        )}\n      >\n        {element.help && (\n          <StyledWidgetLabelHelp>\n            <TooltipIcon content={element.help} placement={Placement.TOP} />\n          </StyledWidgetLabelHelp>\n        )}\n      </WidgetLabel>\n      <StyledWaveformContainerDiv disabled={disabled}>\n        <Toolbar\n          isFullScreen={false}\n          disableFullscreenMode={true}\n          target={StyledWaveformContainerDiv}\n        >\n          {recordingUrl && (\n            <ToolbarAction\n              label=\"Download as WAV\"\n              icon={FileDownload}\n              onClick={handleDownloadClick}\n            />\n          )}\n          {deleteFileUrl && (\n            <ToolbarAction\n              label=\"Clear recording\"\n              icon={Delete}\n              onClick={handleDeleteClick}\n            />\n          )}\n        </Toolbar>\n        <AudioInputActionButtons\n          isRecording={isRecording}\n          isPlaying={isPlaying}\n          isUploading={isUploading}\n          isError={isError}\n          recordingUrlExists={Boolean(recordingUrl)}\n          startRecording={handleStartRecording}\n          stopRecording={handleStopRecording}\n          onClickPlayPause={onClickPlayPause}\n          onClear={handleClearWithError}\n          disabled={disabled || hasNoMicPermissions}\n        />\n        <StyledWaveformInnerDiv>\n          {isError && <AudioInputErrorState />}\n          {showPlaceholder && <Placeholder />}\n          {hasNoMicPermissions && <NoMicPermissions />}\n          <StyledWaveSurferDiv\n            data-testid=\"stAudioInputWaveSurfer\"\n            ref={waveSurferRef}\n            show={!showNoMicPermissionsOrPlaceholderOrError}\n          />\n        </StyledWaveformInnerDiv>\n        <StyledWaveformTimeCode\n          isPlayingOrRecording={isPlayingOrRecording}\n          disabled={disabled}\n          data-testid=\"stAudioInputWaveformTimeCode\"\n        >\n          {shouldUpdatePlaybackTime ? progressTime : recordingTime}\n        </StyledWaveformTimeCode>\n      </StyledWaveformContainerDiv>\n    </StyledAudioInputContainerDiv>\n  )\n}\n\nexport default memo(AudioInput)\n"],"names":["Mic","React.forwardRef","props","ref","attrs","React.createElement","EmotionIconBase","_extends","Pause","PlayArrow","Refresh","StopCircle","t","e","i","n","s","r","o","h","a","e$1","l","c","d","u","p","m","f","g","v","b","y","C","useDownloadUrl","url","filename","libConfig","enforceDownloadInNewTab","useContext","LibContext","useCallback","link","createDownloadLinkElement","style","display","document","body","appendChild","click","removeChild","useWidgetManagerElementState","widgetMgr","id","formId","key","defaultValue","useEffect","existingValue","getElementState","isNullOrUndefined","notNullOrUndefined","setElementState","state","setStateInternal","useState","setState","value","element","useMemo","onFormCleared","useFormClearHelper","uploadFiles","files","uploadClient","widgetInfo","fragmentId","fileUrls","fetchFileURLs","successfulUploads","failedUploads","map","file","error","ensureError","filesWithUrls","zip","Promise","all","fileUrl","uploadUrl","fileId","Error","uploadFile","push","setFileUploaderStateValue","FileUploaderStateProto","uploadedFileInfo","UploadedFileInfoProto","name","webkitRelativePath","size","fromUi","StyledAudioInputContainerDiv","_styled","target","StyledWaveformContainerDiv","theme","disabled","height","sizes","largestElementHeight","width","background","colors","secondaryBg","borderRadius","radii","default","marginBottom","spacing","twoXS","alignItems","position","paddingLeft","xs","paddingRight","sm","border","widgetBorderColor","borderWidth","undefined","cursor","StyledWaveformInnerDiv","styles","StyledWaveSurferDiv","show","StyledWaveformTimeCode","isPlayingOrRecording","margin","fontFamily","fonts","monospace","color","fadedText40","bodyText","fadedText60","backgroundColor","fontSize","fontSizes","StyledErrorContainerDiv","StyledErrorTextSpan","StyledNoMicInputLearnMoreLink","textDecoration","linkUnderline","StyledPlaceholderContainerDiv","justifyContent","StyledPlaceholderDotsDiv","dotSize","opacity","backgroundSize","backgroundImage","fadedText10","backgroundRepeat","StyledActionButtonStopRecordingDiv","primary","padding","threeXS","redColor","StyledActionButtonStartRecordingDiv","StyledActionButtonPlayPauseDiv","StyledActionButtonContainerDiv","flexGrow","flexShrink","gap","marginRight","StyledWidgetLabelHelp","marginLeft","ActionButton","onClick","ariaLabel","iconContent","jsx","BaseButton","BaseButtonKind","BORDERLESS_ICON","Icon","AudioInputStopRecordingButton","stopRecording","AudioInputPlayPauseButton","isPlaying","onClickPlayPause","AudioInputStartRecordingButton","startRecording","AudioInputResetButton","AudioInputActionButtons","isRecording","isUploading","isError","recordingUrlExists","onClear","StyledSpinnerIcon","AudioInputActionButtons$1","memo","AudioInputErrorState","AudioInputErrorState$1","WAVEFORM_PADDING","BAR_WIDTH","BAR_GAP","BAR_RADIUS","CURSOR_WIDTH","STARTING_TIME_STRING","LOG","getLogger","convertFileToWav","fileBlob","targetSampleRate","window","AudioContext","audioContext","arrayBuffer","close","audioBuffer","decodeAudioData","outputSampleRate","sampleRate","debug","encodeWAV","duration","numberOfChannels","frameCount","Math","ceil","OfflineAudioContext","offlineContext","source","createBufferSource","buffer","connect","destination","start","resampledBuffer","startRendering","numOfChan","length","HEADER_SIZE","ArrayBuffer","view","DataView","writeString","offset","string","setUint8","charCodeAt","setUint32","setUint16","channel","sample","max","min","getChannelData","setInt16","Blob","type","formatTime","timeMs","seconds","floor","minutes","hours","remainingSeconds","remainingMinutes","displaySec","toString","padStart","displayMin","displayHours","NoMicPermissions","ENABLE_PERIPHERALS_DOCS_URL","NoMicPermissions$1","Placeholder","Placeholder$1","AudioInput","useEmotionTheme","previousTheme","usePrevious","wavesurfer","setWavesurfer","waveSurferRef","useRef","currentBlobUrlRef","deleteFileUrl","setDeleteFileUrl","recordingUrl","setRecordingUrl","setRerender","forceRerender","prev","progressTime","setProgressTime","recordingTime","setRecordingTime","shouldUpdatePlaybackTime","setShouldUpdatePlaybackTime","hasNoMicPermissions","setHasNoMicPermissions","hasRequestedMicPermissions","setHasRequestedMicPermissions","setIsUploading","setIsError","widgetId","widgetFormId","recordPluginRef","recordPluginHandlersRef","transcodeAndUploadFile","blob","setFormsWithUploadsInProgress","Set","wavBlob","convertAudioToWav","blobUrl","URL","createObjectURL","current","revokeObjectURL","load","setOptions","interact","waveColor","blend","progressColor","timestamp","Date","toISOString","slice","replace","File","upload","deleteUrl","handleClear","updateWidgetManager","deleteFile","urlToRevoke","empty","formClearHelper","FormClearHelper","manageFormClearListener","disconnect","initializeWaveSurfer","ws","WaveSurfer","create","container","convertRemToPx","barWidth","barGap","barRadius","cursorWidth","handleTimeUpdate","time","handlePause","on","recordOptions","renderRecordedAudio","scrollingWaveform","mimeType","record","registerPlugin","RecordPlugin","handleRecordProgress","err","handlers","un","destroy","isEqual","playPause","handlePlayPause","stream","navigator","mediaDevices","getUserMedia","audio","getTracks","forEach","track","stop","audioConstraints","ideal","waitForRecordEnd","plugin","resolve","reject","handleRecordEnd","recordPlugin","downloadRecording","Boolean","showPlaceholder","showNoMicPermissionsOrPlaceholderOrError","handleStartRecording","handleStopRecording","handleClearWithError","handleDownloadClick","handleDeleteClick","jsxs","WidgetLabel","label","labelVisibilityProtoValueToEnum","labelVisibility","help","TooltipIcon","Placement","TOP","Toolbar","ToolbarAction","FileDownload","Delete","AudioInput_default"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6]}