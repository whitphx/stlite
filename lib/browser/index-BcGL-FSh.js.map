{"version":3,"file":"index-BcGL-FSh.js","sources":["../../../node_modules/@emotion-icons/material-outlined/ChevronLeft/ChevronLeft.esm.js","../../../node_modules/@emotion-icons/material-outlined/ChevronRight/ChevronRight.esm.js","../../../node_modules/@emotion-icons/material-outlined/CloudUpload/CloudUpload.esm.js","../../../node_modules/@emotion-icons/material-outlined/Error/Error.esm.js","../../../streamlit/frontend/lib/src/components/widgets/FileUploader/styled-components.ts","../../../streamlit/frontend/lib/src/components/widgets/FileUploader/FileDropzoneInstructions.tsx","../../../streamlit/frontend/lib/src/components/widgets/FileUploader/FileDropzone.tsx","../../../streamlit/frontend/lib/src/components/shared/TextElements/Text.tsx","../../../streamlit/frontend/lib/src/components/widgets/FileUploader/UploadedFile.tsx","../../../streamlit/frontend/lib/src/components/widgets/FileUploader/withPagination/styled-components.ts","../../../streamlit/frontend/lib/src/components/widgets/FileUploader/withPagination/Pagination.tsx","../../../streamlit/frontend/lib/src/components/widgets/FileUploader/withPagination/withPagination.tsx","../../../streamlit/frontend/lib/src/components/widgets/FileUploader/UploadedFiles.tsx","../../../streamlit/frontend/lib/src/components/widgets/FileUploader/FileUploader.tsx"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/extends\";\nimport * as React from 'react';\nimport { EmotionIconBase } from '@emotion-icons/emotion-icon';\nexport var ChevronLeft = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var attrs = {\n    \"fill\": \"currentColor\",\n    \"xmlns\": \"http://www.w3.org/2000/svg\"\n  };\n  return /*#__PURE__*/React.createElement(EmotionIconBase, _extends({\n    iconAttrs: attrs,\n    iconVerticalAlign: \"middle\",\n    iconViewBox: \"0 0 24 24\"\n  }, props, {\n    ref: ref\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"none\",\n    d: \"M0 0h24v24H0V0z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12l4.58-4.59z\"\n  }));\n});\nChevronLeft.displayName = 'ChevronLeft';\nexport var ChevronLeftDimensions = {\n  height: 24,\n  width: 24\n};","import _extends from \"@babel/runtime/helpers/extends\";\nimport * as React from 'react';\nimport { EmotionIconBase } from '@emotion-icons/emotion-icon';\nexport var ChevronRight = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var attrs = {\n    \"fill\": \"currentColor\",\n    \"xmlns\": \"http://www.w3.org/2000/svg\"\n  };\n  return /*#__PURE__*/React.createElement(EmotionIconBase, _extends({\n    iconAttrs: attrs,\n    iconVerticalAlign: \"middle\",\n    iconViewBox: \"0 0 24 24\"\n  }, props, {\n    ref: ref\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"none\",\n    d: \"M0 0h24v24H0V0z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6-6-6z\"\n  }));\n});\nChevronRight.displayName = 'ChevronRight';\nexport var ChevronRightDimensions = {\n  height: 24,\n  width: 24\n};","import _extends from \"@babel/runtime/helpers/extends\";\nimport * as React from 'react';\nimport { EmotionIconBase } from '@emotion-icons/emotion-icon';\nexport var CloudUpload = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var attrs = {\n    \"fill\": \"currentColor\",\n    \"xmlns\": \"http://www.w3.org/2000/svg\"\n  };\n  return /*#__PURE__*/React.createElement(EmotionIconBase, _extends({\n    iconAttrs: attrs,\n    iconVerticalAlign: \"middle\",\n    iconViewBox: \"0 0 24 24\"\n  }, props, {\n    ref: ref\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"none\",\n    d: \"M0 0h24v24H0V0z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M19.35 10.04A7.49 7.49 0 0012 4C9.11 4 6.6 5.64 5.35 8.04A5.994 5.994 0 000 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM19 18H6c-2.21 0-4-1.79-4-4 0-2.05 1.53-3.76 3.56-3.97l1.07-.11.5-.95A5.469 5.469 0 0112 6c2.62 0 4.88 1.86 5.39 4.43l.3 1.5 1.53.11A2.98 2.98 0 0122 15c0 1.65-1.35 3-3 3zM8 13h2.55v3h2.9v-3H16l-4-4z\"\n  }));\n});\nCloudUpload.displayName = 'CloudUpload';\nexport var CloudUploadDimensions = {\n  height: 24,\n  width: 24\n};","import _extends from \"@babel/runtime/helpers/extends\";\nimport * as React from 'react';\nimport { EmotionIconBase } from '@emotion-icons/emotion-icon';\nexport var Error = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var attrs = {\n    \"fill\": \"currentColor\",\n    \"xmlns\": \"http://www.w3.org/2000/svg\"\n  };\n  return /*#__PURE__*/React.createElement(EmotionIconBase, _extends({\n    iconAttrs: attrs,\n    iconVerticalAlign: \"middle\",\n    iconViewBox: \"0 0 24 24\"\n  }, props, {\n    ref: ref\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z\"\n  }));\n});\nError.displayName = 'Error';\nexport var ErrorDimensions = {\n  height: 24,\n  width: 24\n};","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2025)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport styled, { CSSObject } from \"@emotion/styled\"\n\nimport { convertRemToPx, EmotionTheme } from \"~lib/theme\"\n\nexport interface StyledFileDropzone {\n  isDisabled: boolean\n}\n\nexport const StyledFileDropzoneSection = styled.section<StyledFileDropzone>(\n  ({ isDisabled, theme }) => ({\n    display: \"flex\",\n    gap: theme.spacing.lg,\n    alignItems: \"center\",\n    padding: theme.spacing.lg,\n    backgroundColor: theme.colors.secondaryBg,\n    borderRadius: theme.radii.default,\n    border: theme.colors.widgetBorderColor\n      ? `${theme.sizes.borderWidth} solid ${theme.colors.widgetBorderColor}`\n      : undefined,\n    height: theme.sizes.largestElementHeight,\n    \":focus\": {\n      outline: \"none\",\n    },\n    \":focus-visible\": {\n      boxShadow: `0 0 0 1px ${theme.colors.primary}`,\n    },\n    cursor: isDisabled ? \"not-allowed\" : \"pointer\",\n  })\n)\n\nexport const StyledFileDropzoneInstructions = styled.div(({ theme }) => ({\n  marginRight: \"auto\",\n  alignItems: \"center\",\n  display: \"flex\",\n  gap: theme.spacing.lg,\n  // Ensure flex children can shrink and allow text truncation\n  minWidth: 0,\n  width: \"100%\",\n}))\n\nexport const StyledFileDropzoneInstructionsFileUploaderIcon = styled.span(\n  ({ theme }) => ({\n    color: theme.colors.darkenedBgMix100,\n  })\n)\n\nexport const StyledFileDropzoneInstructionsText = styled.span<{\n  disabled?: boolean\n}>(({ theme, disabled }) => ({\n  color: disabled ? theme.colors.fadedText40 : theme.colors.bodyText,\n}))\n\nexport const StyledFileDropzoneInstructionsSubtext = styled.span<{\n  disabled?: boolean\n}>(({ theme, disabled }) => ({\n  fontSize: theme.fontSizes.sm,\n  color: disabled ? theme.colors.fadedText40 : theme.colors.fadedText60,\n  // Ellipsis requires a block formatting context and constrained width\n  display: \"block\",\n  textOverflow: \"ellipsis\",\n  overflow: \"hidden\",\n  whiteSpace: \"nowrap\",\n  maxWidth: \"100%\",\n}))\n\nexport const StyledFileDropzoneInstructionsColumn = styled.div({\n  display: \"flex\",\n  flexDirection: \"column\",\n  // Allow child text to shrink inside flex layouts for proper ellipsis\n  minWidth: 0,\n  maxWidth: \"100%\",\n})\n\nexport const StyledButtonNoWrapContainer = styled.span({\n  whiteSpace: \"nowrap\",\n})\n\nexport const StyledUploadedFiles = styled.div(({ theme }) => ({\n  left: 0,\n  right: 0,\n  lineHeight: theme.lineHeights.tight,\n  paddingTop: theme.spacing.md,\n  paddingLeft: theme.spacing.lg,\n  paddingRight: theme.spacing.lg,\n}))\n\nexport const StyledUploadedFilesList = styled.ul(({ theme }) => ({\n  listStyleType: \"none\",\n  margin: theme.spacing.none,\n  padding: theme.spacing.none,\n}))\n\nexport const StyledUploadedFilesListItem = styled.li(({ theme }) => ({\n  margin: theme.spacing.none,\n  padding: theme.spacing.none,\n}))\n\nexport const StyledUploadedFileData = styled.div(({ theme }) => ({\n  display: \"flex\",\n  alignItems: \"baseline\",\n  flex: 1,\n  paddingLeft: theme.spacing.lg,\n  overflow: \"hidden\",\n}))\n\nexport const StyledUploadedFileName = styled.div<{ disabled?: boolean }>(\n  ({ theme, disabled }) => ({\n    marginRight: theme.spacing.sm,\n    marginBottom: theme.spacing.twoXS,\n    overflow: \"hidden\",\n    textOverflow: \"ellipsis\",\n    whiteSpace: \"nowrap\",\n    color: disabled ? theme.colors.fadedText40 : theme.colors.bodyText,\n  })\n)\n\nexport const StyledUploadedFile = styled.div(({ theme }) => ({\n  display: \"flex\",\n  alignItems: \"center\",\n  marginBottom: theme.spacing.twoXS,\n}))\n\nexport const StyledErrorMessage = styled.span(({ theme }) => ({\n  marginRight: theme.spacing.twoXS,\n}))\n\nexport const StyledFileIcon = styled.div<{ disabled?: boolean }>(\n  ({ theme, disabled }) => ({\n    display: \"flex\",\n    padding: theme.spacing.twoXS,\n    color: disabled ? theme.colors.fadedText40 : theme.colors.darkenedBgMix100,\n  })\n)\n\nexport const StyledFileError = styled.small(({ theme }) => ({\n  color: theme.colors.redTextColor,\n  fontSize: theme.fontSizes.sm,\n  height: theme.fontSizes.sm,\n  lineHeight: theme.fontSizes.sm,\n  display: \"flex\",\n  alignItems: \"center\",\n  whiteSpace: \"nowrap\",\n}))\n\nexport const StyledFileErrorIcon = styled.span({})\n\nconst compactFileUploader = (theme: EmotionTheme): CSSObject => ({\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any -- TODO: Replace 'any' with a more specific type.\n  [StyledFileDropzoneSection as any]: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"flex-start\",\n    height: \"auto\",\n    gap: theme.spacing.sm,\n  },\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any -- TODO: Replace 'any' with a more specific type.\n  [StyledFileDropzoneInstructionsFileUploaderIcon as any]: {\n    display: \"none\",\n  },\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any -- TODO: Replace 'any' with a more specific type.\n  [StyledFileDropzoneInstructionsText as any]: {\n    marginBottom: theme.spacing.twoXS,\n  },\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any -- TODO: Replace 'any' with a more specific type.\n  [StyledUploadedFiles as any]: {\n    paddingRight: theme.spacing.lg,\n  },\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any -- TODO: Replace 'any' with a more specific type.\n  [StyledUploadedFile as any]: {\n    maxWidth: \"inherit\",\n    flex: 1,\n    alignItems: \"flex-start\",\n    marginBottom: theme.spacing.sm,\n  },\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any -- TODO: Replace 'any' with a more specific type.\n  [StyledUploadedFileName as any]: {\n    width: theme.sizes.full,\n  },\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any -- TODO: Replace 'any' with a more specific type.\n  [StyledUploadedFileData as any]: {\n    flexDirection: \"column\",\n  },\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any -- TODO: Replace 'any' with a more specific type.\n  [StyledFileError as any]: {\n    height: \"auto\",\n    whiteSpace: \"initial\",\n  },\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any -- TODO: Replace 'any' with a more specific type.\n  [StyledFileErrorIcon as any]: {\n    display: \"none\",\n  },\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any -- TODO: Replace 'any' with a more specific type.\n  [StyledUploadedFilesListItem as any]: {\n    margin: theme.spacing.none,\n    padding: theme.spacing.none,\n  },\n})\n\ninterface StyledFileUploaderProps {\n  width: number\n}\nexport const StyledFileUploader = styled.div<StyledFileUploaderProps>(\n  ({ theme, width }) => {\n    if (width < convertRemToPx(\"23rem\")) {\n      return compactFileUploader(theme)\n    }\n  }\n)\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2025)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { memo } from \"react\"\n\nimport { CloudUpload } from \"@emotion-icons/material-outlined\"\n\nimport Icon from \"~lib/components/shared/Icon\"\nimport { FileSize, getSizeDisplay } from \"~lib/util/FileHelper\"\n\nimport {\n  StyledFileDropzoneInstructions,\n  StyledFileDropzoneInstructionsColumn,\n  StyledFileDropzoneInstructionsFileUploaderIcon,\n  StyledFileDropzoneInstructionsSubtext,\n  StyledFileDropzoneInstructionsText,\n} from \"./styled-components\"\n\nexport interface Props {\n  multiple: boolean\n  acceptedExtensions: string[]\n  maxSizeBytes: number\n  acceptDirectory?: boolean\n  disabled?: boolean\n}\n\nconst FileDropzoneInstructions = ({\n  multiple,\n  acceptedExtensions,\n  maxSizeBytes,\n  acceptDirectory = false,\n  disabled,\n}: Props): React.ReactElement => {\n  // Determine what type of content we're accepting\n  const getContentTypeText = (): string => {\n    if (acceptDirectory) {\n      return \"directories\"\n    }\n    return multiple ? \"files\" : \"file\"\n  }\n\n  const getFileTypeInfo = (): string | null => {\n    if (acceptedExtensions.length) {\n      return ` â€¢ ${acceptedExtensions\n        .map(ext => ext.replace(/^\\./, \"\").toUpperCase())\n        .join(\", \")}`\n    }\n    return null\n  }\n\n  const getSizeLimit = (): string => {\n    return `Limit ${getSizeDisplay(maxSizeBytes, FileSize.Byte, 0)} per file`\n  }\n\n  return (\n    <StyledFileDropzoneInstructions data-testid=\"stFileUploaderDropzoneInstructions\">\n      <StyledFileDropzoneInstructionsFileUploaderIcon>\n        <Icon content={CloudUpload} size=\"threeXL\" />\n      </StyledFileDropzoneInstructionsFileUploaderIcon>\n      <StyledFileDropzoneInstructionsColumn>\n        <StyledFileDropzoneInstructionsText disabled={disabled}>\n          Drag and drop {getContentTypeText()} here\n        </StyledFileDropzoneInstructionsText>\n        <StyledFileDropzoneInstructionsSubtext disabled={disabled}>\n          {getSizeLimit()}\n          {getFileTypeInfo()}\n        </StyledFileDropzoneInstructionsSubtext>\n      </StyledFileDropzoneInstructionsColumn>\n    </StyledFileDropzoneInstructions>\n  )\n}\n\nexport default memo(FileDropzoneInstructions)\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2025)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { memo } from \"react\"\n\nimport Dropzone, { FileRejection } from \"react-dropzone\"\n\nimport BaseButton, {\n  BaseButtonKind,\n  BaseButtonSize,\n} from \"~lib/components/shared/BaseButton\"\n\nimport FileDropzoneInstructions from \"./FileDropzoneInstructions\"\nimport {\n  StyledButtonNoWrapContainer,\n  StyledFileDropzoneSection,\n} from \"./styled-components\"\nimport { getAccept } from \"./utils\"\n\nexport interface Props {\n  disabled: boolean\n  onDrop: (acceptedFiles: File[], rejectedFiles: FileRejection[]) => void\n  multiple: boolean\n  acceptedExtensions: string[]\n  maxSizeBytes: number\n  label: string\n  acceptDirectory?: boolean\n}\n\nconst FileDropzone = ({\n  onDrop,\n  multiple,\n  acceptedExtensions,\n  maxSizeBytes,\n  disabled,\n  label,\n  acceptDirectory = false,\n}: Props): React.ReactElement => (\n  <Dropzone\n    onDrop={onDrop}\n    multiple={multiple}\n    accept={getAccept(acceptedExtensions)}\n    maxSize={maxSizeBytes}\n    disabled={disabled}\n    // react-dropzone v12+ uses the File System Access API by default,\n    // causing the bug described in https://github.com/streamlit/streamlit/issues/6176.\n    useFsAccessApi={false}\n  >\n    {({ getRootProps, getInputProps }) => {\n      const inputProps = getInputProps({\n        multiple: multiple || !!acceptDirectory,\n      })\n\n      return (\n        <StyledFileDropzoneSection\n          {...getRootProps()}\n          data-testid=\"stFileUploaderDropzone\"\n          isDisabled={disabled}\n          aria-label={label}\n          aria-disabled={disabled}\n        >\n          <input\n            data-testid=\"stFileUploaderDropzoneInput\"\n            {...inputProps}\n            {...(acceptDirectory && { webkitdirectory: \"\" })}\n          />\n          <FileDropzoneInstructions\n            multiple={multiple}\n            acceptedExtensions={acceptedExtensions}\n            maxSizeBytes={maxSizeBytes}\n            acceptDirectory={acceptDirectory}\n            disabled={disabled}\n          />\n          <StyledButtonNoWrapContainer>\n            <BaseButton\n              kind={BaseButtonKind.SECONDARY}\n              disabled={disabled}\n              size={BaseButtonSize.SMALL}\n            >\n              {acceptDirectory ? \"Browse directories\" : \"Browse files\"}\n            </BaseButton>\n          </StyledButtonNoWrapContainer>\n        </StyledFileDropzoneSection>\n      )\n    }}\n  </Dropzone>\n)\n\nexport default memo(FileDropzone)\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2025)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport styled from \"@emotion/styled\"\n\nexport enum Kind {\n  DANGER = \"danger\",\n}\n\ninterface TextProps {\n  kind?: Kind\n  disabled?: boolean\n}\n\nexport const Small = styled.small<TextProps>(({ kind, disabled, theme }) => {\n  const { redTextColor, fadedText60, fadedText40 } = theme.colors\n\n  let color = fadedText60\n  if (disabled) {\n    color = fadedText40\n  }\n  if (kind === Kind.DANGER) {\n    color = redTextColor\n  }\n\n  return {\n    color,\n    fontSize: theme.fontSizes.sm,\n    lineHeight: theme.lineHeights.tight,\n  }\n})\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2025)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { memo } from \"react\"\n\nimport {\n  Clear,\n  Error,\n  InsertDriveFile,\n} from \"@emotion-icons/material-outlined\"\n\nimport BaseButton, { BaseButtonKind } from \"~lib/components/shared/BaseButton\"\nimport Icon from \"~lib/components/shared/Icon\"\nimport ProgressBar, { Size } from \"~lib/components/shared/ProgressBar\"\nimport { Small } from \"~lib/components/shared/TextElements\"\nimport { FileSize, getSizeDisplay } from \"~lib/util/FileHelper\"\n\nimport {\n  StyledErrorMessage,\n  StyledFileError,\n  StyledFileErrorIcon,\n  StyledFileIcon,\n  StyledUploadedFile,\n  StyledUploadedFileData,\n  StyledUploadedFileName,\n} from \"./styled-components\"\nimport { UploadFileInfo } from \"./UploadFileInfo\"\n\nexport interface Props {\n  fileInfo: UploadFileInfo\n  onDelete: (id: number) => void\n  disabled: boolean\n}\n\nexport interface UploadedFileStatusProps {\n  fileInfo: UploadFileInfo\n  disabled: boolean\n}\n\nexport const UploadedFileStatus = ({\n  fileInfo,\n  disabled,\n}: UploadedFileStatusProps): React.ReactElement | null => {\n  if (fileInfo.status.type === \"uploading\") {\n    return <ProgressBar value={fileInfo.status.progress} size={Size.SMALL} />\n  }\n\n  if (fileInfo.status.type === \"error\") {\n    return (\n      <StyledFileError>\n        <StyledErrorMessage data-testid=\"stFileUploaderFileErrorMessage\">\n          {fileInfo.status.errorMessage}\n        </StyledErrorMessage>\n        <StyledFileErrorIcon>\n          <Icon content={Error} size=\"lg\" />\n        </StyledFileErrorIcon>\n      </StyledFileError>\n    )\n  }\n\n  if (fileInfo.status.type === \"uploaded\") {\n    return (\n      <Small disabled={disabled}>\n        {getSizeDisplay(fileInfo.size, FileSize.Byte)}\n      </Small>\n    )\n  }\n\n  return null\n}\n\nconst UploadedFile = ({\n  fileInfo,\n  onDelete,\n  disabled,\n}: Props): React.ReactElement => {\n  return (\n    <StyledUploadedFile\n      className=\"stFileUploaderFile\"\n      data-testid=\"stFileUploaderFile\"\n    >\n      <StyledFileIcon disabled={disabled}>\n        <Icon content={InsertDriveFile} size=\"twoXL\" />\n      </StyledFileIcon>\n      <StyledUploadedFileData className=\"stFileUploaderFileData\">\n        <StyledUploadedFileName\n          className=\"stFileUploaderFileName\"\n          data-testid=\"stFileUploaderFileName\"\n          title={fileInfo.name}\n          disabled={disabled}\n        >\n          {fileInfo.name}\n        </StyledUploadedFileName>\n        <UploadedFileStatus fileInfo={fileInfo} disabled={disabled} />\n      </StyledUploadedFileData>\n      <div data-testid=\"stFileUploaderDeleteBtn\">\n        <BaseButton\n          onClick={() => onDelete(fileInfo.id)}\n          kind={BaseButtonKind.MINIMAL}\n          disabled={disabled}\n          aria-label={`Remove ${fileInfo.name}`}\n        >\n          <Icon content={Clear} size=\"lg\" />\n        </BaseButton>\n      </div>\n    </StyledUploadedFile>\n  )\n}\n\nexport default memo(UploadedFile)\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2025)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport styled from \"@emotion/styled\"\n\nexport const StyledPagination = styled.div(({ theme }) => ({\n  display: \"flex\",\n  alignItems: \"center\",\n  justifyContent: \"space-between\",\n  paddingBottom: theme.spacing.twoXS,\n  marginBottom: theme.spacing.twoXS,\n}))\n\nexport const StyledPaginators = styled.div(({ theme }) => ({\n  display: \"flex\",\n  alignItems: \"center\",\n  justifyContent: \"center\",\n  color: theme.colors.fadedText40,\n}))\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2025)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { memo } from \"react\"\n\nimport { ChevronLeft, ChevronRight } from \"@emotion-icons/material-outlined\"\n\nimport BaseButton, { BaseButtonKind } from \"~lib/components/shared/BaseButton\"\nimport Icon from \"~lib/components/shared/Icon\"\nimport { Small } from \"~lib/components/shared/TextElements\"\n\nimport { StyledPagination, StyledPaginators } from \"./styled-components\"\n\nexport interface Props {\n  currentPage: number\n  totalPages: number\n  pageSize: number\n  onNext: (event: React.SyntheticEvent<HTMLElement>) => void\n  onPrevious: (event: React.SyntheticEvent<HTMLElement>) => void\n}\n\nconst Pagination = ({\n  currentPage,\n  totalPages,\n  onNext,\n  onPrevious,\n}: Props): React.ReactElement => {\n  return (\n    <StyledPagination data-testid=\"stFileUploaderPagination\">\n      <Small>{`Showing page ${currentPage} of ${totalPages}`}</Small>\n      <StyledPaginators>\n        <BaseButton onClick={onPrevious} kind={BaseButtonKind.MINIMAL}>\n          <Icon content={ChevronLeft} size=\"xl\" />\n        </BaseButton>\n        <BaseButton onClick={onNext} kind={BaseButtonKind.MINIMAL}>\n          <Icon content={ChevronRight} size=\"xl\" />\n        </BaseButton>\n      </StyledPaginators>\n    </StyledPagination>\n  )\n}\n\nexport default memo(Pagination)\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2025)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { ComponentType, ReactElement, useEffect, useState } from \"react\"\n\nimport hoistNonReactStatics from \"hoist-non-react-statics\"\n\nimport { usePrevious } from \"~lib/util/Hooks\"\n\nimport Pagination from \"./Pagination\"\n\nexport interface Props {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any -- TODO: Replace 'any' with a more specific type.\n  items: any[]\n  pageSize: number\n  resetOnAdd: boolean\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any -- TODO: Replace 'any' with a more specific type.\nconst calculateNumPages = (items: any[], pageSize: number): number =>\n  Math.ceil(items.length / pageSize)\n\nconst withPagination = (\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any -- TODO: Replace 'any' with a more specific type.\n  WrappedComponent: ComponentType<React.PropsWithChildren<any>>\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any -- TODO: Replace 'any' with a more specific type.\n): ComponentType<React.PropsWithChildren<any>> => {\n  const WithPagination = ({\n    pageSize,\n    items,\n    resetOnAdd,\n    ...props\n  }: Props): ReactElement => {\n    const [currentPage, updateCurrentPage] = useState<number>(0)\n    const [totalPages, updateTotalPages] = useState<number>(() =>\n      calculateNumPages(items, pageSize)\n    )\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any -- TODO: Replace 'any' with a more specific type.\n    const prevItems: any[] = usePrevious(items)\n\n    useEffect(() => {\n      if (prevItems && prevItems.length !== items.length) {\n        updateTotalPages(calculateNumPages(items, pageSize))\n      }\n      if (prevItems && prevItems.length < items.length) {\n        if (resetOnAdd) {\n          updateCurrentPage(0)\n        }\n      } else if (currentPage + 1 >= totalPages) {\n        updateCurrentPage(totalPages - 1)\n      }\n    }, [items, currentPage, pageSize, prevItems, resetOnAdd, totalPages])\n\n    const onNext = (): void => {\n      updateCurrentPage(Math.min(currentPage + 1, totalPages - 1))\n    }\n\n    const onPrevious = (): void => {\n      updateCurrentPage(Math.max(0, currentPage - 1))\n    }\n\n    const paginatedItems = items.slice(\n      currentPage * pageSize,\n      currentPage * pageSize + pageSize\n    )\n    return (\n      <>\n        <WrappedComponent items={paginatedItems} {...props} />\n        {items.length > pageSize ? (\n          <Pagination\n            pageSize={pageSize}\n            totalPages={totalPages}\n            currentPage={currentPage + 1}\n            onNext={onNext}\n            onPrevious={onPrevious}\n          />\n        ) : null}\n      </>\n    )\n  }\n  return hoistNonReactStatics(WithPagination, WrappedComponent)\n}\n\nexport default withPagination\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2025)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { memo, ReactElement } from \"react\"\n\nimport {\n  StyledUploadedFiles,\n  StyledUploadedFilesList,\n  StyledUploadedFilesListItem,\n} from \"./styled-components\"\nimport UploadedFile from \"./UploadedFile\"\nimport { UploadFileInfo } from \"./UploadFileInfo\"\nimport withPagination, { PaginationProps } from \"./withPagination\"\n\nexport interface Props {\n  items: UploadFileInfo[]\n  onDelete: (id: number) => void\n  disabled: boolean\n}\n\nconst UploadedFileList = ({\n  items,\n  onDelete,\n  disabled,\n}: Props): ReactElement => {\n  return (\n    <StyledUploadedFilesList>\n      {items.map(file => (\n        <StyledUploadedFilesListItem key={file.id}>\n          <UploadedFile\n            fileInfo={file}\n            onDelete={onDelete}\n            disabled={disabled}\n          />\n        </StyledUploadedFilesListItem>\n      ))}\n    </StyledUploadedFilesList>\n  )\n}\n\nexport const PaginatedFiles = withPagination(UploadedFileList)\n\nconst UploadedFiles = (props: Props & PaginationProps): ReactElement => (\n  <StyledUploadedFiles>\n    <PaginatedFiles {...props} />\n  </StyledUploadedFiles>\n)\nexport default memo(UploadedFiles)\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2025)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { memo, PureComponent } from \"react\"\n\nimport isEqual from \"lodash/isEqual\"\nimport zip from \"lodash/zip\"\nimport { flushSync } from \"react-dom\"\nimport { FileRejection } from \"react-dropzone\"\n\nimport {\n  FileUploader as FileUploaderProto,\n  FileUploaderState as FileUploaderStateProto,\n  FileURLs as FileURLsProto,\n  IFileURLs,\n  UploadedFileInfo as UploadedFileInfoProto,\n} from \"@streamlit/protobuf\"\n\nimport { withCalculatedWidth } from \"~lib/components/core/Layout/withCalculatedWidth\"\nimport { Placement } from \"~lib/components/shared/Tooltip\"\nimport TooltipIcon from \"~lib/components/shared/TooltipIcon\"\nimport {\n  StyledWidgetLabelHelp,\n  WidgetLabel,\n} from \"~lib/components/widgets/BaseWidget\"\nimport { FormClearHelper } from \"~lib/components/widgets/Form\"\nimport { FileUploadClient } from \"~lib/FileUploadClient\"\nimport {\n  FileSize,\n  getRejectedFileInfo,\n  sizeConverter,\n} from \"~lib/util/FileHelper\"\nimport {\n  isNullOrUndefined,\n  labelVisibilityProtoValueToEnum,\n} from \"~lib/util/utils\"\nimport { WidgetStateManager } from \"~lib/WidgetStateManager\"\n\nimport FileDropzone from \"./FileDropzone\"\nimport { StyledFileUploader } from \"./styled-components\"\nimport UploadedFiles from \"./UploadedFiles\"\nimport { UploadedStatus, UploadFileInfo } from \"./UploadFileInfo\"\n\ninterface InnerProps {\n  disabled: boolean\n  element: FileUploaderProto\n  widgetMgr: WidgetStateManager\n  uploadClient: FileUploadClient\n  fragmentId?: string\n  width: number\n}\n\nexport type Props = Omit<InnerProps, \"width\">\n\ntype FileUploaderStatus =\n  | \"ready\" // FileUploader can upload or delete files\n  | \"updating\" // at least one file is being uploaded or deleted\n\nexport interface State {\n  /**\n   * List of files dropped on the FileUploader by the user. This list includes\n   * rejected files that will not be updated.\n   */\n  files: UploadFileInfo[]\n}\n\nclass FileUploader extends PureComponent<InnerProps, State> {\n  private readonly formClearHelper = new FormClearHelper()\n\n  /**\n   * A counter for assigning unique internal IDs to each file tracked\n   * by the uploader. These IDs are used to update file state internally,\n   * and are separate from the serverFileIds that are returned by the server.\n   */\n  private localFileIdCounter = 1\n\n  /**\n   * A flag to handle the case where a file uploader that only accepts one file\n   * at a time has its file replaced, which we want to treat as a single change\n   * rather than the deletion of a file followed by the upload of another.\n   * Doing this ensures that the script (and thus callbacks, etc) is only run a\n   * single time when replacing a file.  Note that deleting a file and uploading\n   * a new one with two interactions (clicking the 'X', then dragging a file\n   * into the file uploader) will still cause the script to execute twice.\n   */\n  private forceUpdatingStatus = false\n\n  public constructor(props: InnerProps) {\n    super(props)\n    this.state = this.initialValue\n  }\n\n  get initialValue(): State {\n    const emptyState = { files: [] }\n    const { widgetMgr, element } = this.props\n\n    const widgetValue = widgetMgr.getFileUploaderStateValue(element)\n    if (isNullOrUndefined(widgetValue)) {\n      return emptyState\n    }\n\n    const { uploadedFileInfo } = widgetValue\n    if (isNullOrUndefined(uploadedFileInfo) || uploadedFileInfo.length === 0) {\n      return emptyState\n    }\n\n    return {\n      files: uploadedFileInfo.map(f => {\n        const name = f.name as string\n        const size = f.size as number\n\n        const fileId = f.fileId as string\n        const fileUrls = f.fileUrls as FileURLsProto\n\n        return new UploadFileInfo(name, size, this.nextLocalFileId(), {\n          type: \"uploaded\",\n          fileId,\n          fileUrls,\n        })\n      }),\n    }\n  }\n\n  public override componentWillUnmount(): void {\n    this.formClearHelper.disconnect()\n  }\n\n  /**\n   * Return this.props.element.maxUploadSizeMb, converted to bytes.\n   */\n  private get maxUploadSizeInBytes(): number {\n    const maxMbs = this.props.element.maxUploadSizeMb\n    return sizeConverter(maxMbs, FileSize.Megabyte, FileSize.Byte)\n  }\n\n  /**\n   * Return the FileUploader's current status, which is derived from\n   * its state.\n   */\n  public get status(): FileUploaderStatus {\n    const isFileUpdating = (file: UploadFileInfo): boolean =>\n      file.status.type === \"uploading\"\n\n    // If any of our files is Uploading or Deleting, then we're currently\n    // updating.\n    if (this.state.files.some(isFileUpdating) || this.forceUpdatingStatus) {\n      return \"updating\"\n    }\n\n    return \"ready\"\n  }\n\n  public override componentDidUpdate = (): void => {\n    // If our status is not \"ready\", then we have uploads in progress.\n    // We won't submit a new widgetValue until all uploads have resolved.\n    if (this.status !== \"ready\") {\n      return\n    }\n\n    const newWidgetValue = this.createWidgetValue()\n    const { element, widgetMgr, fragmentId } = this.props\n\n    // Maybe send a widgetValue update to the widgetStateManager.\n    const prevWidgetValue = widgetMgr.getFileUploaderStateValue(element)\n    if (!isEqual(newWidgetValue, prevWidgetValue)) {\n      widgetMgr.setFileUploaderStateValue(\n        element,\n        newWidgetValue,\n        {\n          fromUi: true,\n        },\n        fragmentId\n      )\n    }\n  }\n\n  public override componentDidMount(): void {\n    const newWidgetValue = this.createWidgetValue()\n    const { element, widgetMgr, fragmentId } = this.props\n\n    // Set the state value on mount, to avoid triggering an extra rerun after\n    // the first rerun.\n    const prevWidgetValue = widgetMgr.getFileUploaderStateValue(element)\n    if (prevWidgetValue === undefined) {\n      widgetMgr.setFileUploaderStateValue(\n        element,\n        newWidgetValue,\n        {\n          fromUi: false,\n        },\n        fragmentId\n      )\n    }\n  }\n\n  private createWidgetValue(): FileUploaderStateProto {\n    const uploadedFileInfo: UploadedFileInfoProto[] = this.state.files\n      .filter(f => f.status.type === \"uploaded\")\n      .map(f => {\n        const { name, size, status } = f\n        const { fileId, fileUrls } = status as UploadedStatus\n        return new UploadedFileInfoProto({\n          fileId,\n          fileUrls,\n          name,\n          size,\n        })\n      })\n\n    return new FileUploaderStateProto({ uploadedFileInfo })\n  }\n\n  /**\n   * Helper function to check if a file matches the accepted extensions\n   */\n  private isFileTypeAllowed = (file: File): boolean => {\n    const { element } = this.props\n    const { type: acceptedExtensions } = element\n\n    // If no extensions are specified, allow all files\n    if (!acceptedExtensions || acceptedExtensions.length === 0) {\n      return true\n    }\n\n    // Check if the file extension matches any of the accepted extensions\n    const fileName = file.name.toLowerCase()\n    return acceptedExtensions.some(ext => fileName.endsWith(ext.toLowerCase()))\n  }\n\n  /**\n   * Helper function to separate directory files into accepted and rejected based on file type\n   */\n  private filterDirectoryFiles = (\n    files: File[]\n  ): { accepted: File[]; rejected: FileRejection[] } => {\n    const accepted: File[] = []\n    const rejected: FileRejection[] = []\n\n    files.forEach(file => {\n      if (this.isFileTypeAllowed(file)) {\n        accepted.push(file)\n      } else {\n        rejected.push({\n          file,\n          errors: [\n            {\n              code: \"file-invalid-type\",\n              message: `${file.type} files are not allowed.`,\n            },\n          ],\n        })\n      }\n    })\n\n    return { accepted, rejected }\n  }\n\n  /**\n   * Called by react-dropzone when files and drag-and-dropped onto the widget.\n   *\n   * @param acceptedFiles an array of files.\n   * @param rejectedFiles an array of FileRejections. A FileRejection\n   * encapsulates a File and an error indicating why it was rejected by\n   * the dropzone widget.\n   */\n  private dropHandler = (\n    acceptedFiles: File[],\n    rejectedFiles: FileRejection[]\n  ): void => {\n    const { element } = this.props\n    const { multipleFiles } = element\n    const isDirectoryUpload = Boolean(element.acceptDirectory)\n\n    // For directory uploads, we need to do our own file type filtering\n    // because webkitdirectory bypasses react-dropzone's normal validation.\n    // TODO: Consider unifying validation logic to avoid divergence between\n    // single/multiple file uploads and directory uploads. Currently, regular\n    // uploads use react-dropzone's built-in validation while directory uploads\n    // use our custom filterDirectoryFiles method. This could lead to\n    // inconsistent behavior.\n    if (isDirectoryUpload && acceptedFiles.length > 0) {\n      const { accepted, rejected } = this.filterDirectoryFiles(acceptedFiles)\n      acceptedFiles = accepted\n      rejectedFiles = [...rejectedFiles, ...rejected]\n    }\n\n    // If this is a single-file uploader and multiple files were dropped,\n    // all the files will be rejected. In this case, we pull out the first\n    // valid file into acceptedFiles, and reject the rest.\n    if (\n      !multipleFiles &&\n      acceptedFiles.length === 0 &&\n      rejectedFiles.length > 1\n    ) {\n      const firstFileIndex = rejectedFiles.findIndex(\n        file =>\n          file.errors.length === 1 && file.errors[0].code === \"too-many-files\"\n      )\n\n      if (firstFileIndex >= 0) {\n        acceptedFiles.push(rejectedFiles[firstFileIndex].file)\n        rejectedFiles.splice(firstFileIndex, 1)\n      }\n    }\n\n    this.props.uploadClient\n      .fetchFileURLs(acceptedFiles)\n      .then((fileURLsArray: IFileURLs[]) => {\n        // If this is a single-file uploader that already has an uploaded file,\n        // remove that file so that it can be replaced with our new one.\n        if (!multipleFiles && acceptedFiles.length > 0) {\n          const existingFile = this.state.files.find(\n            f => f.status.type !== \"error\"\n          )\n          if (existingFile) {\n            this.forceUpdatingStatus = true\n            this.deleteFile(existingFile.id)\n            this.forceUpdatingStatus = false\n          }\n        }\n\n        zip(fileURLsArray, acceptedFiles).forEach(\n          ([fileURLs, acceptedFile]) => {\n            this.uploadFile(fileURLs as FileURLsProto, acceptedFile as File)\n          }\n        )\n      })\n      .catch((errorMessage: string) => {\n        this.addFiles(\n          acceptedFiles.map(f => {\n            return new UploadFileInfo(f.name, f.size, this.nextLocalFileId(), {\n              type: \"error\",\n              errorMessage,\n            })\n          })\n        )\n      })\n\n    // Create an UploadFileInfo for each of our rejected files, and add them to\n    // our state.\n    if (rejectedFiles.length > 0) {\n      const rejectedInfos = rejectedFiles.map(rejected =>\n        getRejectedFileInfo(\n          rejected,\n          this.nextLocalFileId(),\n          this.maxUploadSizeInBytes\n        )\n      )\n      this.addFiles(rejectedInfos)\n    }\n  }\n\n  public uploadFile = (fileURLs: IFileURLs, file: File): void => {\n    // Create an UploadFileInfo for this file and add it to our state.\n    const abortController = new AbortController()\n\n    // For directory uploads, use the relative path to preserve directory structure\n    const fileName = file.webkitRelativePath || file.name\n\n    const uploadingFileInfo = new UploadFileInfo(\n      fileName,\n      file.size,\n      this.nextLocalFileId(),\n      {\n        type: \"uploading\",\n        abortController,\n        progress: 1,\n      }\n    )\n    this.addFile(uploadingFileInfo)\n\n    this.props.uploadClient\n      .uploadFile(\n        this.props.element,\n        fileURLs.uploadUrl as string,\n        file,\n        e => this.onUploadProgress(e, uploadingFileInfo.id),\n        abortController.signal\n      )\n      .then(() => this.onUploadComplete(uploadingFileInfo.id, fileURLs))\n      .catch(err => {\n        // If this was an abort error, we don't show the user an error -\n        // the cancellation was in response to an action they took.\n        if (!(err instanceof DOMException && err.name === \"AbortError\")) {\n          this.updateFile(\n            uploadingFileInfo.id,\n            uploadingFileInfo.setStatus({\n              type: \"error\",\n              errorMessage: err ? err.toString() : \"Unknown error\",\n            })\n          )\n        }\n      })\n  }\n\n  /**\n   * Called when an upload has completed. Updates the file's status, and\n   * assigns it the new file ID returned from the server.\n   */\n  private onUploadComplete = (\n    localFileId: number,\n    fileUrls: IFileURLs\n  ): void => {\n    const curFile = this.getFile(localFileId)\n    if (isNullOrUndefined(curFile) || curFile.status.type !== \"uploading\") {\n      // The file may have been canceled right before the upload\n      // completed. In this case, we just bail.\n      return\n    }\n\n    this.updateFile(\n      curFile.id,\n      curFile.setStatus({\n        type: \"uploaded\",\n        fileId: fileUrls.fileId as string,\n        fileUrls,\n      })\n    )\n  }\n\n  /**\n   * Delete the file with the given ID:\n   * - Cancel the file upload if it's in progress\n   * - Remove the fileID from our local state\n   * We don't actually tell the server to delete the file. It will garbage\n   * collect it.\n   */\n  public deleteFile = (fileId: number): void => {\n    if (this.props.disabled) {\n      return\n    }\n    const file = this.getFile(fileId)\n    if (isNullOrUndefined(file)) {\n      return\n    }\n\n    if (file.status.type === \"uploading\") {\n      // The file hasn't been uploaded. Let's cancel the request.\n      // However, it may have been received by the server so we'll still\n      // send out a request to delete.\n      file.status.abortController.abort()\n    }\n\n    if (file.status.type === \"uploaded\" && file.status.fileUrls.deleteUrl) {\n      // eslint-disable-next-line @typescript-eslint/no-floating-promises -- TODO: Fix this\n      this.props.uploadClient.deleteFile(file.status.fileUrls.deleteUrl)\n    }\n\n    this.removeFile(fileId)\n  }\n\n  /** Append the given file to `state.files`. */\n  private addFile = (file: UploadFileInfo): void => {\n    /* eslint-disable-next-line @eslint-react/dom/no-flush-sync --\n     * Using flushSync here because we need the state to be immediately updated\n     * before any subsequent file upload operations occur.\n     */\n    flushSync(() => {\n      this.setState(state => ({ files: [...state.files, file] }))\n    })\n  }\n\n  /** Append the given files to `state.files`. */\n  private addFiles = (files: UploadFileInfo[]): void => {\n    /* eslint-disable-next-line @eslint-react/dom/no-flush-sync --\n     * Using flushSync here because we need the state to be immediately updated\n     * before any subsequent file upload operations occur.\n     */\n    flushSync(() => {\n      this.setState(state => ({ files: [...state.files, ...files] }))\n    })\n  }\n\n  /** Remove the file with the given ID from `state.files`. */\n  private removeFile = (idToRemove: number): void => {\n    /* eslint-disable-next-line @eslint-react/dom/no-flush-sync --\n     * Using flushSync here because we need the state to be immediately updated\n     * before any subsequent file upload operations occur.\n     */\n    flushSync(() => {\n      this.setState(state => ({\n        files: state.files.filter(file => file.id !== idToRemove),\n      }))\n    })\n  }\n\n  /**\n   * Return the file with the given ID, if one exists.\n   */\n  private getFile = (fileId: number): UploadFileInfo | undefined => {\n    return this.state.files.find(file => file.id === fileId)\n  }\n\n  /** Replace the file with the given id in `state.files`. */\n  private updateFile = (curFileId: number, newFile: UploadFileInfo): void => {\n    /* eslint-disable-next-line @eslint-react/dom/no-flush-sync --\n     * Using flushSync here because we need the state to be immediately updated\n     * before any subsequent file upload operations occur.\n     */\n    flushSync(() => {\n      this.setState(curState => {\n        return {\n          files: curState.files.map(file =>\n            file.id === curFileId ? newFile : file\n          ),\n        }\n      })\n    })\n  }\n\n  /**\n   * Callback for file upload progress. Updates a single file's local `progress`\n   * state.\n   */\n  private onUploadProgress = (event: ProgressEvent, fileId: number): void => {\n    const file = this.getFile(fileId)\n    if (isNullOrUndefined(file) || file.status.type !== \"uploading\") {\n      return\n    }\n\n    const newProgress = Math.round((event.loaded * 100) / event.total)\n    if (file.status.progress === newProgress) {\n      return\n    }\n\n    // Update file.progress\n    this.updateFile(\n      fileId,\n      file.setStatus({\n        type: \"uploading\",\n        abortController: file.status.abortController,\n        progress: newProgress,\n      })\n    )\n  }\n\n  /**\n   * If we're part of a clear_on_submit form, this will be called when our\n   * form is submitted. Restore our default value and update the WidgetManager.\n   */\n  private onFormCleared = (): void => {\n    /* eslint-disable-next-line @eslint-react/dom/no-flush-sync --\n     * Using flushSync here because we need the state to be immediately updated\n     * before any subsequent file upload operations occur.\n     */\n    flushSync(() => {\n      this.setState({ files: [] }, () => {\n        const newWidgetValue = this.createWidgetValue()\n        if (isNullOrUndefined(newWidgetValue)) {\n          return\n        }\n\n        const { widgetMgr, element, fragmentId } = this.props\n        widgetMgr.setFileUploaderStateValue(\n          element,\n          newWidgetValue,\n          { fromUi: true },\n          fragmentId\n        )\n      })\n    })\n  }\n\n  public override render(): React.ReactNode {\n    const { files } = this.state\n    const { element, disabled, widgetMgr, width } = this.props\n    const acceptedExtensions = element.type\n\n    // Manage our form-clear event handler.\n    this.formClearHelper.manageFormClearListener(\n      widgetMgr,\n      element.formId,\n      this.onFormCleared\n    )\n\n    // We display files in the reverse order they were added.\n    // This way, if you have multiple pages of uploaded files and then drop\n    // another one, you'll see that newest file at the top of the first page.\n    const newestToOldestFiles = files.slice().reverse()\n\n    return (\n      <StyledFileUploader\n        className=\"stFileUploader\"\n        data-testid=\"stFileUploader\"\n        width={width}\n      >\n        <WidgetLabel\n          label={element.label}\n          disabled={disabled}\n          labelVisibility={labelVisibilityProtoValueToEnum(\n            element.labelVisibility?.value\n          )}\n        >\n          {element.help && (\n            <StyledWidgetLabelHelp>\n              <TooltipIcon\n                content={element.help}\n                placement={Placement.TOP_RIGHT}\n              />\n            </StyledWidgetLabelHelp>\n          )}\n        </WidgetLabel>\n        <FileDropzone\n          onDrop={this.dropHandler}\n          multiple={element.multipleFiles}\n          acceptedExtensions={acceptedExtensions}\n          maxSizeBytes={this.maxUploadSizeInBytes}\n          label={element.label}\n          disabled={disabled}\n          acceptDirectory={Boolean(element.acceptDirectory)}\n        />\n        {newestToOldestFiles.length > 0 && (\n          <UploadedFiles\n            items={newestToOldestFiles}\n            pageSize={3}\n            onDelete={this.deleteFile}\n            resetOnAdd\n            disabled={disabled}\n          />\n        )}\n      </StyledFileUploader>\n    )\n  }\n\n  private nextLocalFileId(): number {\n    return this.localFileIdCounter++\n  }\n}\n\nconst FileUploaderWithCalculatedWidth = withCalculatedWidth(memo(FileUploader))\nexport default FileUploaderWithCalculatedWidth\n"],"names":["ChevronLeft","React.forwardRef","props","ref","attrs","React.createElement","EmotionIconBase","_extends","ChevronRight","CloudUpload","Error","StyledFileDropzoneSection","_styled","target","isDisabled","theme","display","gap","spacing","lg","alignItems","padding","backgroundColor","colors","secondaryBg","borderRadius","radii","default","border","widgetBorderColor","sizes","borderWidth","undefined","height","largestElementHeight","outline","boxShadow","primary","cursor","StyledFileDropzoneInstructions","marginRight","minWidth","width","StyledFileDropzoneInstructionsFileUploaderIcon","color","darkenedBgMix100","StyledFileDropzoneInstructionsText","disabled","fadedText40","bodyText","StyledFileDropzoneInstructionsSubtext","fontSize","fontSizes","sm","fadedText60","textOverflow","overflow","whiteSpace","maxWidth","StyledFileDropzoneInstructionsColumn","name","styles","StyledButtonNoWrapContainer","StyledUploadedFiles","left","right","lineHeight","lineHeights","tight","paddingTop","md","paddingLeft","paddingRight","StyledUploadedFilesList","listStyleType","margin","none","StyledUploadedFilesListItem","StyledUploadedFileData","flex","StyledUploadedFileName","marginBottom","twoXS","StyledUploadedFile","StyledErrorMessage","StyledFileIcon","StyledFileError","redTextColor","StyledFileErrorIcon","compactFileUploader","flexDirection","full","StyledFileUploader","convertRemToPx","FileDropzoneInstructions","multiple","acceptedExtensions","maxSizeBytes","acceptDirectory","getContentTypeText","getFileTypeInfo","length","map","ext","replace","toUpperCase","join","getSizeLimit","getSizeDisplay","FileSize","Byte","jsxs","jsx","Icon","FileDropzoneInstructions$1","memo","FileDropzone","onDrop","label","Dropzone","getAccept","getRootProps","getInputProps","inputProps","webkitdirectory","BaseButton","BaseButtonKind","SECONDARY","BaseButtonSize","SMALL","FileDropzone$1","Small","kind","Kind","UploadedFileStatus","fileInfo","status","type","ProgressBar","progress","Size","errorMessage","size","UploadedFile","onDelete","InsertDriveFile","id","MINIMAL","Clear","UploadedFile$1","StyledPagination","justifyContent","paddingBottom","StyledPaginators","Pagination","currentPage","totalPages","onNext","onPrevious","Pagination$1","calculateNumPages","items","pageSize","Math","ceil","withPagination","WrappedComponent","hoistNonReactStatics","WithPagination","resetOnAdd","updateCurrentPage","useState","updateTotalPages","prevItems","usePrevious","useEffect","min","max","paginatedItems","slice","Fragment","UploadedFileList","file","PaginatedFiles","UploadedFiles","UploadedFiles$1","FileUploader","PureComponent","constructor","formClearHelper","FormClearHelper","localFileIdCounter","forceUpdatingStatus","componentDidUpdate","newWidgetValue","createWidgetValue","element","widgetMgr","fragmentId","prevWidgetValue","getFileUploaderStateValue","isEqual","setFileUploaderStateValue","fromUi","isFileTypeAllowed","fileName","toLowerCase","some","endsWith","filterDirectoryFiles","files","accepted","rejected","forEach","push","errors","code","message","dropHandler","acceptedFiles","rejectedFiles","multipleFiles","Boolean","firstFileIndex","findIndex","splice","uploadClient","fetchFileURLs","then","fileURLsArray","existingFile","state","find","f","deleteFile","zip","fileURLs","acceptedFile","uploadFile","catch","addFiles","UploadFileInfo","nextLocalFileId","rejectedInfos","getRejectedFileInfo","maxUploadSizeInBytes","abortController","AbortController","webkitRelativePath","uploadingFileInfo","addFile","uploadUrl","e","onUploadProgress","signal","onUploadComplete","err","DOMException","updateFile","setStatus","toString","localFileId","fileUrls","curFile","getFile","isNullOrUndefined","fileId","abort","deleteUrl","removeFile","flushSync","setState","idToRemove","filter","curFileId","newFile","curState","event","newProgress","round","loaded","total","onFormCleared","initialValue","emptyState","widgetValue","uploadedFileInfo","componentWillUnmount","disconnect","maxMbs","maxUploadSizeMb","sizeConverter","Megabyte","isFileUpdating","componentDidMount","UploadedFileInfoProto","FileUploaderStateProto","render","manageFormClearListener","formId","newestToOldestFiles","reverse","WidgetLabel","labelVisibilityProtoValueToEnum","labelVisibility","value","help","StyledWidgetLabelHelp","TooltipIcon","Placement","TOP_RIGHT","FileUploaderWithCalculatedWidth","withCalculatedWidth"],"mappings":"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","x_google_ignoreList":[0,1,2,3]}