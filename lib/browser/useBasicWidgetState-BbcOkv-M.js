import{r as m,A as s}from"./index-CyepuLC6.js";import{u as M}from"./FormClearHelper-DFF0z1_q.js";function S({getStateFromWidgetMgr:i,getDefaultState:r,updateWidgetMgrState:n,element:t,widgetMgr:e,fragmentId:l,onFormCleared:g}){const[d,u]=m.useState(()=>i(e,t)??r(e,t)),[o,a]=m.useState({value:d,fromUi:!1});m.useEffect(()=>{s(o)||(a(null),u(o.value),n(t,e,o,l))},[o,n,t,e,l]);const f=m.useCallback(()=>{a({value:r(e,t),fromUi:!0}),g==null||g()},[a,t,r,e,g]);return M({widgetMgr:e,element:t,onFormCleared:f}),[d,a]}function F({getStateFromWidgetMgr:i,getDefaultStateFromProto:r,getCurrStateFromProto:n,updateWidgetMgrState:t,element:e,widgetMgr:l,fragmentId:g,onFormCleared:d}){const u=m.useCallback((f,c)=>r(c),[r]),[o,a]=S({getStateFromWidgetMgr:i,getDefaultState:u,updateWidgetMgrState:t,element:e,widgetMgr:l,fragmentId:g,onFormCleared:d});return m.useEffect(()=>{e.setValue&&(e.setValue=!1,a({value:n(e),fromUi:!1}))},[e,n,a]),[o,a]}export{F as a,S as u};
